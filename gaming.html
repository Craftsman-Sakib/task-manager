<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Pulse - Gaming News & Tracker</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        /* CSS Styles */
        :root {
            --bg-dark: #121212;
            --card-bg: #1e1e2e;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --accent-color: #6a5acd;
            --hover-color: #7b68ee;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .app-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            overflow-y: auto;
            background-color: var(--card-bg);
            padding: 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 100vh;
            position: sticky;
            top: 0;
            height: 100%;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-color) rgba(106, 90, 205, 0.2);
        }

        .sidebar::-webkit-scrollbar {
            width: 8px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(106, 90, 205, 0.1);
        }

        .sidebar::-webkit-scrollbar-thumb {
            background-color: var(--accent-color);
            border-radius: 4px;
        }

        .sidebar-toggle {
            display: none;
            position: fixed;
            top: 15px;
            right: 15px;
            background: var(--accent-color);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
        }

        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-section h3 {
            color: var(--text-primary);
            margin-bottom: 12px;
            font-weight: 500;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border-radius: 12px;
            background: rgba(106, 90, 205, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.1),
                    rgba(106, 90, 205, 0.05));
        }

        .sidebar-section h3:hover {
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.15),
                    rgba(106, 90, 205, 0.1));
            transform: translateX(4px);
        }

        .section-header-content {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Arrow styles for Categories */
        .sidebar-section h3::after {
            content: '\f107';
            /* FontAwesome chevron icon */
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            font-size: 0.9rem;
            opacity: 0.7;
            transition: transform 0.3s ease;
        }

        .sidebar-section h3.active::after {
            transform: rotate(180deg);
            /* Rotate arrow on active state */
        }

        /* Initially hide the categories */
        .sidebar-section#categories-section ul {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 0;
            padding: 0;
        }

        .sidebar-section#categories-section ul li {
            padding: 10px 12px;
            margin: 4px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            color: var(--text-secondary);
            background: rgba(106, 90, 205, 0.05);
        }

        .sidebar-section#categories-section ul li:hover {
            background: rgba(106, 90, 205, 0.15);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .sidebar-section#categories-section ul li.active {
            background: rgba(106, 90, 205, 0.2);
            color: var(--accent-color);
            font-weight: 600;
            font-size: 1rem;
            letter-spacing: 0.02em;
            transform: translateX(4px);
            box-shadow: 0 2px 4px rgba(106, 90, 205, 0.1);
        }

        .sidebar-section#categories-section.active ul {
            max-height: 800px;
        }

        .sidebar-section ul {
            list-style: none;
        }

        .sidebar-section ul li {
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            /* Use flexbox */
            align-items: center;
            /* Align items vertically */
            gap: 10px;
            /* Space between image and text */
        }

        /* Style for the game thumbnails in the sidebar */
        .sidebar-section ul li img {
            width: 24px;
            /* Adjust size as needed */
            height: 24px;
            /* Adjust size as needed */
            object-fit: cover;
            border-radius: 5px;
            /* Rounded corners for images */
        }

        .sidebar-section ul li:hover {
            background-color: rgba(106, 90, 205, 0.2);
        }

        .sidebar-section ul li.active {
            background-color: rgba(106, 90, 205, 0.4);
        }

        /* Game List */
        .game-list-container {
            background-color: var(--bg-dark);
            padding: 20px;
            overflow-y: auto;
            position: relative;
        }

        .game-list-container .search-bar {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .game-list-container .search-input {
            flex-grow: 1;
            padding: 8px;
            margin-right: 10px;
            background-color: rgba(30, 30, 46, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border-radius: 5px;
        }

        .game-list-container .search-icon {
            cursor: pointer;
            color: var(--accent-color);
        }

        .game-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        /* Game List Container Scrollbar */
        .game-list-container::-webkit-scrollbar {
            width: 8px;
        }

        .game-list-container::-webkit-scrollbar-track {
            background: rgba(106, 90, 205, 0.1);
        }

        .game-list-container::-webkit-scrollbar-thumb {
            background-color: var(--accent-color);
            border-radius: 4px;
        }

        .game-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .game-card-image-container {
            position: relative;
            width: 100%;
            padding-top: 133.33%;
            /* 3:4 aspect ratio */
            overflow: hidden;
            border-radius: 12px;
            background: linear-gradient(45deg, rgba(106, 90, 205, 0.1), rgba(0, 0, 0, 0.2));
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .game-card-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
            backface-visibility: hidden;
            will-change: transform;

            /* Image optimization */
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;

            /* Add loading animation */
            opacity: 0;
            animation: imageLoad 0.3s ease forwards;

        }

        /* Loading animation */
        @keyframes imageLoad {
            from {
                opacity: 0;
                transform: scale(1.02);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Style for the 'UPCOMING' overlay */
        .game-card-image .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.5);
            /* Semi-transparent black */
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 10px;
            /* Match the border radius of the image */
            opacity: 0;
            /* Hidden by default */
            transition: opacity 0.3s ease;
            /* Smooth transition for hover effect */
            z-index: 5;
        }

        /* Style for 'NEW' overlay */
        .game-card-image .overlay.new {
            background-color: rgba(0, 150, 255, 0.7);
            /* Blueish color */
        }

        /* Style for 'UPCOMING' overlay */
        .game-card-image .overlay.upcoming {
            background-color: rgba(0, 255, 0, 0.7);
            /* Greenish color */
        }

        .game-card:hover .game-card-image {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        /* Show overlay on hover */
        .game-card:hover .game-card-image .overlay {
            opacity: 1;
        }

        .game-card-image::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
        }

        .game-card-image.upcoming::before {
            content: "UPCOMING";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 255, 0, 0.7);
            color: black;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            display: block;
        }

        .game-card-image.new::before {
            content: "NEW";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 255, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            display: block;
        }

        .game-card-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .game-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            position: relative;
        }

        .game-card-title {
            font-size: 1rem;
            color: var(--text-primary);
            font-weight: 600;
            margin: 0;
            padding: 10px 15px;
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.15) 0%,
                    rgba(106, 90, 205, 0.05) 100%);
            border-left: 3px solid var(--accent-color);
            border-radius: 4px;
            line-height: 1.3;
            position: relative;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            max-height: 3.6em;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            letter-spacing: 0.02em;
            backdrop-filter: blur(5px);
        }

        .game-card-title:hover {
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.25) 0%,
                    rgba(106, 90, 205, 0.15) 100%);
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            color: white;
        }

        .game-card-title::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right,
                    transparent,
                    rgba(106, 90, 205, 0.1));
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .game-card-title:hover::after {
            transform: translateX(0);
        }

        .game-card-tags {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 10px;
        }

        .tag-section {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            border-bottom: 1px solid rgba(106, 90, 205, 0.1);
            padding-bottom: 8px;
        }

        .game-tag {
            background-color: rgba(106, 90, 205, 0.2);
            color: var(--accent-color);
            padding: 2px 6px;
            /* Reduced padding */
            border-radius: 15px;
            /* Slightly more rounded */
        }

        .game-card-actions {
            display: flex;
            gap: 10px;
            margin-top: auto;
            align-items: center;
            justify-content: space-between;
            /* Changed to space-between */
        }

        .btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
            justify-content: center;
            /* Make all buttons the same height */
            min-height: 32px;
        }

        .btn i {
            line-height: 1;
        }

        .btn-details {
            background-color: var(--accent-color);
            color: white;
            flex: 1 0 auto;
            text-decoration: none;
            /* Remove underline for hyperlinks */
        }

        .btn-favorite,
        .btn-wishlist {
            background-color: transparent;
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            /* Remove flex-grow to prevent stretching */
            /* flex-grow: 0;  Removed flex-grow */
            padding: 5px;
            /* Adjust padding to give smaller height and fit icon+text*/
            line-height: 1;
        }

        .btn-favorite.active {
            background-color: var(--accent-color);
            color: white;
        }

        .add-game-section {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 90%;
            max-width: 600px;
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            z-index: 1001;
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0;
            pointer-events: none;
            overflow-y: auto;
            max-height: 90vh;
        }

        .add-game-section.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            pointer-events: auto;
        }

        /* Override browser default scrollbar */
        .add-game-section {
            scrollbar-width: thin;
            scrollbar-color: var(--accent-color) var(--card-bg);
        }

        .add-game-section::-webkit-scrollbar {
            width: 8px;
            /* Width of the scrollbar */
        }

        .add-game-section::-webkit-scrollbar-track {
            background: var(--card-bg);
            /* Color of the track */
        }

        .add-game-section::-webkit-scrollbar-thumb {
            background-color: var(--accent-color);
            /* Color of the scroll thumb */
            border-radius: 10px;
            /* Rounded corners for the thumb */
            border: 2px solid var(--card-bg);
            /* Creates padding around the thumb */
        }

        .add-game-section::-webkit-scrollbar-thumb:hover {
            background-color: var(--hover-color);
            /* Color of the scroll thumb on hover */
        }

        /* Overlay for the Add New Game Section */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .overlay.active {
            display: block;
        }

        .close-add-game {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .add-game-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 100;
        }

        .add-game-button:hover {
            background-color: var(--hover-color);
        }

        .add-game-form {
            display: grid;
            gap: 15px;
        }

        .add-game-form input,
        .add-game-form select,
        .add-game-form textarea {
            width: 100%;
            padding: 10px;
            background-color: rgba(30, 30, 46, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border-radius: 5px;
        }

        /* Styles for the Release Date Group */
        .release-date-group,
        .beta-release-group,
        .alpha-release-group,
        .early-access-group {
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }

        .release-date-group h4,
        .beta-release-group h4,
        .alpha-release-group h4,
        .early-access-group h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .release-date-item,
        .beta-release-item,
        .alpha-release-item,
        .early-access-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .release-date-item i,
        .beta-release-item i,
        .alpha-release-item i,
        .early-access-item i {
            color: var(--accent-color);
        }

        .release-date-input,
        .beta-release-input,
        .alpha-release-input,
        .early-access-input {
            background-color: rgba(30, 30, 46, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border-radius: 5px;
            padding: 5px;
            flex-grow: 1;
        }

        .early-access-input {
            flex-grow: 1;
            /* Changed to grow and take available space */
        }

        /* Developer and Publisher Styles */
        .developer-publisher-group {
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }

        .developer-publisher-group h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        /*Special qoute section style*/
        .special-quote-group {
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }

        .special-quote-group h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        @media (max-width: 1200px) {
            .app-container {
                grid-template-columns: 1fr;
            }

            .sidebar-toggle {
                display: block;
            }

            .sidebar {
                position: fixed;
                top: 0;
                height: 100vh;
                z-index: 1000;
                transition: right 0.3s ease;
                overflow-y: auto;
                /* Maintain scroll functionality in mobile view */
            }

            .sidebar {
                right: -250px;
                /* Adjusted width for sidebar */
                width: 250px;
            }

            .sidebar.active {
                right: 0;
            }
        }

        /* Game Description */
        .game-description {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            max-height: 4.8em;
        }

        /* Game Details Modal */
        .game-details-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            /* Ensure the modal is above other elements */
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .game-details-modal.active {
            display: flex;
        }

        /* Styles for the game details modal content */
        .game-details-content {
            background: linear-gradient(145deg,
                    rgba(30, 30, 46, 0.95),
                    rgba(30, 30, 46, 0.85));
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            max-width: 800px;
            width: 95%;
            max-height: 80vh;
            padding: 32px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-color) var(--card-bg);
        }

        .game-details-content::-webkit-scrollbar {
            width: 8px;
            /* Width of the scrollbar */
        }

        .game-details-content::-webkit-scrollbar-track {
            background: var(--card-bg);
            /* Color of the track */
        }

        .game-details-content::-webkit-scrollbar-thumb {
            background-color: var(--accent-color);
            /* Color of the thumb */
            border-radius: 10px;
            /* Rounded corners for the thumb */
            border: 2px solid var(--card-bg);
            /* Creates padding around the thumb */
        }

        .game-details-content::-webkit-scrollbar-thumb:hover {
            background-color: var(--hover-color);
            /* Darken color of the thumb on hover */
        }

        .game-details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }

        .game-details-header h3 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--accent-color);
        }

        .close-details {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
            padding: 0;
        }

        .close-details:hover {
            color: var(--accent-color);
        }

        .game-details-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .game-details-item {
            background: rgba(106, 90, 205, 0.1);
            align-items: center;
            padding: 16px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            display: flex;
            gap: 12px;
        }

        .game-details-item:hover {
            background: rgba(106, 90, 205, 0.15);
            transform: translateY(-2px);
        }

        .game-details-item i {
            color: var(--accent-color);
            font-size: 1.2rem;
            padding: 8px;
            background: rgba(106, 90, 205, 0.2);
            border-radius: 8px;
            min-width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .game-details-item span {
            flex-grow: 1;
            line-height: 1.6;
        }

        /* Developer and Publisher Styling */
        .dev-publisher-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .developer-name,
        .publisher-name {
            background: rgba(106, 90, 205, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--accent-color);
            border: 1px solid rgba(106, 90, 205, 0.3);
            transition: all 0.3s ease;
        }

        .developer-name:hover,
        .publisher-name:hover {
            background: rgba(106, 90, 205, 0.3);
            transform: translateX(4px);
        }

        .dev-label,
        .publisher-label {
            font-weight: bold;
            /* Make labels bold */
            color: var(--text-primary);
        }

        .multi-select-container {
            position: relative;
            width: 100%;
        }

        .multi-select-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            background-color: rgba(30, 30, 46, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            padding: 5px;
            min-height: 40px;
        }

        .multi-select-tag {
            background-color: var(--accent-color);
            color: white;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .multi-select-tag .remove-tag {
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
        }

        .multi-select-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-top: none;
            border-radius: 0 0 5px 5px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            display: none;
        }

        .multi-select-dropdown.active {
            display: block;
        }

        .multi-select-dropdown label {
            display: block;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .multi-select-dropdown label:hover {
            background-color: rgba(106, 90, 205, 0.2);
        }

        .multi-select-dropdown input[type="checkbox"] {
            margin-right: 10px;
        }

        .game-card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .tag-group {
            display: flex;
            align-items: center;
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.1) 0%,
                    rgba(106, 90, 205, 0.05) 100%);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 8px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .tag-group:hover {
            transform: translateX(5px);
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.15) 0%,
                    rgba(106, 90, 205, 0.1) 100%);
            border-color: rgba(106, 90, 205, 0.2);
        }

        .tag-group-icon {
            background: rgba(106, 90, 205, 0.15);
            padding: 8px 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .tag-group-icon i {
            color: var(--accent-color);
            font-size: 0.9rem;
        }

        .tag-group-tags {
            display: flex;
            align-items: center;
            padding: 6px 12px;
            gap: 8px;
            flex-wrap: wrap;
        }

        .game-tag {
            color: var(--text-primary);
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 4px;
            background: rgba(106, 90, 205, 0.15);
            transition: all 0.3s ease;
        }

        .tag-group:hover .game-tag {
            background: rgba(106, 90, 205, 0.25);
            color: white;
        }

        .tag-overflow {
            background: rgba(106, 90, 205, 0.25);
            color: var(--accent-color);
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 0.7rem;
            transition: all 0.3s ease;
        }

        .tag-group:hover .tag-overflow {
            background: rgba(106, 90, 205, 0.35);
            color: white;
        }

        /* Differentiate tag types with subtle color variations */
        .tag-group[data-type="genre"] .tag-group-icon {
            background-color: rgba(106, 90, 205, 0.2);
        }

        .tag-group[data-type="platform"] .tag-group-icon {
            background-color: rgba(0, 128, 0, 0.2);
        }

        .tag-group[data-type="store"] .tag-group-icon {
            background-color: rgba(255, 165, 0, 0.2);
        }

        .tag-group[data-type="mod"] .tag-group-icon {
            background-color: rgba(255, 0, 255, 0.2);
        }

        .tag-group[data-type="year"] .tag-group-icon {
            background-color: rgba(0, 0, 255, 0.2);
        }

        .additional-images-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .additional-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Style for price display on the game card image */
        .game-card-price {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.9rem;
            z-index: 10;
        }

        .game-card-price .free-tag {
            background-color: rgba(0, 128, 0, 0.7);
            /* Darker green background for Free */
            color: #00ff00;
            /* Bright green text */
            padding: 2px 6px;
            border-radius: 5px;
            font-weight: bold;
        }

        /* Style for link display on the game card */
        .game-card-link {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(8px);
            color: var(--text-primary);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            z-index: 10;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            max-width: calc(100% - 60px);
            /* Account for favorite icon */
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .game-card-link::before {
            content: '\f0c1';
            /* Link icon */
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            font-size: 0.75rem;
            color: var(--accent-color);
        }

        .game-card-link:hover {
            background: rgba(106, 90, 205, 0.3);
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            color: white;
        }

        .game-card-link:hover::before {
            color: white;
        }

        .price-tag {
            background-color: rgba(0, 128, 0, 0.2);
            /* Green background for            /* Green background for price */
            color: #00ff00;
            /* Bright green text */
            padding: 2px 6px;
            border-radius: 5px;
            font-weight: bold;
        }

        .free-tag {
            background-color: rgba(0, 0, 255, 0.2);
            /* Blue background for free */
            color: #007bff;
            /* Bright blue text */
            padding: 2px 6px;
            border-radius: 5px;
            font-weight: bold;
        }

        /*Special Quote Style for game card*/
        .special-quote {
            background-color: rgba(106, 90, 205, 0.1);
            /* Light shade of accent color */
            color: var(--text-primary);
            /* Primary text color for contrast */
            padding: 5px 10px;
            /* Reduced padding */
            border-radius: 10px;
            /* More rounded corners */
            font-size: 0.8rem;
            /* Smaller font size */
            font-weight: normal;
            /* Regular font weight */
            margin-top: 8px;
            /* Reduced margin */
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
            /* Subtle inner shadow */
            line-height: 1.4;
            /* Slightly increased line height for readability */
            text-align: center;
            /* Centered text */
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            /* Smooth transition for hover effect */
        }

        .special-quote:hover {
            background-color: rgba(106, 90, 205, 0.2);
            /* Slightly darker on hover */
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.4);
            /* Slightly stronger shadow on hover */
        }

        /* Media query for smaller screens */
        @media (max-width: 768px) {
            .game-card {
                flex-direction: column;
                /* Stack elements vertically */
            }

            .game-card-image {
                width: 100%;
                /* Full width */
                height: 200px;
                /* Adjust height as needed */
            }
        }

        /* YouTube trailer modal styles */
        .youtube-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2100;
            /* Higher than other modals and details modal */
            display: none;
        }

        .youtube-modal-content {
            background: #000;
            padding: 20px;
            border-radius: 10px;
            position: relative;
            max-width: 80%;
            max-height: 80%;
        }

        .youtube-modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #fff;
            cursor: pointer;
            font-size: 20px;
        }

        .youtube-iframe {
            width: 853px;
            /* YouTube responsive width */
            height: 480px;
            /* YouTube responsive height */
        }

        /* Responsive design for YouTube modal */
        @media (max-width: 768px) {
            .youtube-iframe {
                width: 100%;
                height: auto;
            }

            .youtube-modal-content {
                padding: 10px;
            }
        }

        /* Year and Month Filter Styles */
        .year-month-filter {
            margin-bottom: 20px;
        }

        .year-month-filter h3 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .year-filter-list,
        .month-filter-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            list-style: none;
            padding: 0;
        }

        .year-filter-item,
        .month-filter-item {
            background-color: rgba(106, 90, 205, 0.2);
            color: var(--accent-color);
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
        }

        .year-filter-item:hover,
        .month-filter-item:hover {
            background-color: rgba(106, 90, 205, 0.4);
        }

        .year-filter-item.active,
        .month-filter-item.active {
            background-color: var(--accent-color);
            color: white;
        }

        .month-filter-list {
            display: none;
            /* Hide by default */
        }

        .year-filter-item.active .month-filter-list {
            display: flex;
            /* Show when year is active */
        }

        .year-filter-item .month-filter-list {
            margin-left: 0;
            margin-top: 10px;
            gap: 5px;
            /* Adjust as needed */
        }

        /* Image Popup Styles */
        .image-popup {
            display: none;
            position: fixed;
            z-index: 3000;
            /* Ensure it's on top */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
            text-align: center;
        }

        .image-popup.visible {
            display: flex;
            /* Use flexbox to center the image */
            justify-content: center;
            /* Center horizontally */
            align-items: center;
            /* Center vertically */
        }

        .image-popup img {
            max-width: 80%;
            max-height: 80%;
            border: 4px solid var(--card-bg);
            /* Add a border to the image */
        }

        /* Image Popup Button Styles */
        .image-popup .close-btn,
        .image-popup .prev-btn,
        .image-popup .next-btn {
            position: absolute;
            top: 50%;
            /* Align the vertical center of the buttons to the vertical center of the screen */
            transform: translateY(-50%);
            /* Offset the button by half its height to truly center it */
            color: white;
            font-size: 25px;
            /* Adjust as needed */
            cursor: pointer;
            user-select: none;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            /* Add some padding */
            border-radius: 50%;
            transition: background-color 0.3s ease;
            z-index: 3001;
            /* Ensure buttons are above the image */
            width: 45px;
            /* Fixed width for the circular button */
            height: 45px;
            /* Fixed height for the circular button */
            text-align: center;
            /* Center the icon inside the button */
            line-height: 45px;
            /* Adjust if necessary to vertically center the icon */
            display: flex;
            /* Use flexbox for centering */
            align-items: center;
            /* Center vertically */
            justify-content: center;
            /* Center horizontally */
        }

        .image-popup .close-btn:hover,
        .image-popup .prev-btn:hover,
        .image-popup .next-btn:hover {
            background-color: var(--accent-color);
        }

        .image-popup .close-btn {
            right: 20px;
            /* Position close button top-right */
            top: 20px;
            /* Position close button top-right */
            transform: none;
            /* No need to transform */
        }

        .image-popup .prev-btn {
            left: 20px;
            /* Position on the left side of the image */
        }

        .image-popup .next-btn {
            right: 20px;
            /* Position on the right side of the image */
        }

        /* Details header style to show game name and game image*/
        .details-title-image-section {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 24px;
            margin-bottom: 32px;
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.1),
                    rgba(106, 90, 205, 0.05));
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .details-game-image {
            width: 180px;
            height: 240px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .details-game-image:hover {
            transform: scale(1.02);
        }

        .details-game-title {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(90deg, #fff, rgba(255, 255, 255, 0.7));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }

        .trailer-link {
            color: var(--accent-color);
            cursor: pointer;
            text-decoration: underline;
        }

        .trailer-link:hover {
            color: var(--hover-color);
        }

        /* New DLC Container Styles */
        .dlc-container {
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }

        .dlc-container h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .dlc-list {
            display: grid;
            gap: 10px;
        }

        .dlc-item {
            background-color: rgba(106, 90, 205, 0.1);
            border: 1px solid rgba(106, 90, 205, 0.2);
            padding: 10px;
            border-radius: 8px;
        }

        .dlc-item strong {
            color: var(--accent-color);
            font-weight: 600;
        }

        .dlc-item span {
            display: block;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        /* Improved DLC Input Field Styles in Add Game Form */
        .dlc-list-container {
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }

        .dlc-list-container h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .dlc-item {
            display: grid;
            /* Use grid layout */
            grid-template-columns: repeat(4, 1fr);
            /* 4 columns for name, date, price, and image link */
            gap: 10px;
            /* Space between grid items */
            align-items: center;
            /* Vertically align items */
            margin-bottom: 5px;
        }

        .dlc-input {
            background-color: rgba(30, 30, 46, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border-radius: 5px;
            padding: 5px;
            width: 100%;
        }

        /* Style for remove button */
        .dlc-item button {
            background-color: rgba(255, 0, 0, 0.1);
            color: #ff4d4d;
            border: 2px solid #ff4d4d;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            grid-column: span 4;
            justify-self: end;
        }

        .dlc-item button:hover {
            background-color: #ff4d4d;
            color: white;
        }

        /* Style for the input field labels */
        .dlc-item label {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        /* Wishlist and Favorite Styling */
        .game-card .wishlist-fav-container {
            display: flex;
            gap: 5px;
        }

        .game-card .btn-wishlist,
        .game-card .btn-favorite {
            background-color: transparent;
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            padding: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
            line-height: 1;
        }

        .game-card .btn-wishlist.active,
        .game-card .btn-favorite.active {
            background-color: var(--accent-color);
            color: white;
        }

        .game-card .btn-wishlist i,
        .game-card .btn-favorite i {
            pointer-events: none;
        }

        /* Updated styles for the right-aligned Add New Game button */
        .add-game-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 100;
            /* Ensure it stays above other elements */
            transition: background-color 0.3s ease;
        }

        .add-game-button:hover {
            background-color: var(--hover-color);
        }

        .add-game-button i {
            font-size: 1.5rem;
        }

        /* Style for the heart icon container */
        .favorite-icon {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(8px);
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        /* Style for the heart icon */
        .favorite-icon i {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            transform-origin: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Hover effect for the heart icon container */
        .favorite-icon:hover {
            transform: scale(1.1);
            background: rgba(0, 0, 0, 0.4);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .favorite-icon:hover i {
            color: white;
            transform: scale(1.1);
        }

        /* Active state for the heart icon (when favorited) */
        .favorite-icon.active {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .favorite-icon.active i {
            color: #ff4d4d;
            transform: scale(1.1);
            filter: drop-shadow(0 0 2px rgba(255, 77, 77, 0.3));
        }

        .favorite-icon.active:hover {
            background: rgba(255, 77, 77, 0.15);
            border-color: rgba(255, 77, 77, 0.3);
            transform: scale(1.15) rotate(5deg);
        }

        .game-card-image-container {
            position: relative;
        }

        .game-card-image-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                    rgba(106, 90, 205, 0.05) 25%,
                    rgba(106, 90, 205, 0.1) 37%,
                    rgba(106, 90, 205, 0.05) 63%);
            animation: shimmer 1.5s infinite linear;
            background-size: 400% 100%;
        }

        @keyframes shimmer {
            0% {
                background-position: 100% 0;
            }

            100% {
                background-position: -100% 0;
            }
        }

        .game-card:hover .game-card-image-container {
            transform: translateY(-4px);
        }

        /* Style for the container of platform icons */
        .platform-icons-container {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            padding: 8px 12px;
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.1) 0%,
                    rgba(106, 90, 205, 0.05) 100%);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }


        .platform-icons-container:hover {
            transform: translateX(5px);
            background: linear-gradient(145deg,
                    rgba(106, 90, 205, 0.15) 0%,
                    rgba(106, 90, 205, 0.1) 100%);
            border-color: rgba(106, 90, 205, 0.2);
        }

        /* Update individual platform icon styles */
        .platform-icon {
            width: 20px;
            height: 20px;
            transition: all 0.3s ease;
            position: relative;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            filter: brightness(0) invert(73%) sepia(12%) saturate(1640%) hue-rotate(202deg) brightness(87%) contrast(87%);
        }

        .platform-icon:hover {
            transform: scale(1.15);
            filter: brightness(0) invert(73%) sepia(59%) saturate(552%) hue-rotate(202deg) brightness(101%) contrast(96%);
        }

        /* Add tooltip for platform names */
        .platform-icon::after {
            content: attr(data-platform);
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%) scale(0.95);
            background: rgba(106, 90, 205, 0.9);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 10;
        }

        .platform-icon:hover::after {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) scale(1);
        }

        .platform-icon.light-theme {
            filter: brightness(0);
            /* For dark icons on light background */
        }

        /* Individual platform icon styles with increased specificity */
        .game-card-content .platform-icon.pc {
            background-image: url('pc.svg');
        }

        .game-card-content .platform-icon.xbox {
            background-image: url('xbox.svg');
        }

        .game-card-content .platform-icon.playstation {
            background-image: url('playstation.svg');
        }

        .game-card-content .platform-icon.nintendo {
            background-image: url('nintendo.svg');
        }

        .game-card-content .platform-icon.windows {
            background-image: url('windows.svg');
        }

        .game-card-content .platform-icon.linux {
            background-image: url('linux.svg');
        }

        .game-card-content .platform-icon.macos {
            background-image: url('macos.svg');
        }

        .game-card-content .platform-icon.android {
            background-image: url('android.svg');
        }

        .game-card-content .platform-icon.ios {
            background-image: url('ios.svg');
        }

        /* Style for the container of platform icons in game details */
        .game-details-content .platform-icons-container {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
            /* Adjust as necessary */
        }

        /* Style for each individual platform icon in game details */
        .game-details-content .platform-icon {
            width: 20px;
            /* Adjust size as needed */
            height: 20px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-block;
        }

        /* Specific styles for each platform icon using the correct selector */
        .game-details-content .platform-icon.pc {
            background-image: url('pc.svg');
        }

        .game-details-content .platform-icon.xbox {
            background-image: url('xbox.svg');
        }

        .game-details-content .platform-icon.playstation {
            background-image: url('playstation.svg');
        }

        .game-details-content .platform-icon.nintendo {
            background-image: url('nintendo.svg');
        }

        /* Specific styles for each platform icon using the correct selector */
        .game-details-content .platform-icon.windows {
            background-image: url('windows.svg');
        }

        .game-details-content .platform-icon.linux {
            background-image: url('linux.svg');
        }

        .game-details-content .platform-icon.macos {
            background-image: url('macos.svg');
        }

        .game-details-content .platform-icon.android {
            background-image: url('android.svg');
        }

        .game-details-content .platform-icon.ios {
            background-image: url('ios.svg');
        }

        /* Style for store icons in game card tags */
        .game-card-content .store-icon {
            width: 16px;
            /* Smaller size for game card */
            height: 16px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-block;
            margin-right: 3px;
            /* Space between icon and text */
        }

        /* Style for store icons in game details */
        .game-details-content .store-icon {
            width: 20px;
            /* Larger size for game details */
            height: 20px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-block;
            margin-right: 5px;
            /* Space between icon and text */
        }

        /* Specific styles for each store icon */
        .store-icon.steam {
            background-image: url('steam.svg');
        }

        .store-icon.epic-games {
            background-image: url('epic.svg');
        }

        .store-icon.gog {
            background-image: url('gog.svg');
        }

        .store-icon.xbox-store {
            background-image: url('xbox.svg');
        }

        .store-icon.playstation-store {
            background-image: url('playstation.svg');
        }

        .store-icon.itchio {
            background-image: url('itchio.svg');
        }

        /* Add these styles to your existing CSS */
        .trailer-container {
            margin-top: 16px;
            width: 100%;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            padding-bottom: 56.25%;
            /* 16:9 Aspect Ratio */
            height: 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .trailer-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }

        /* Style for the favorite games section */
        #favorite-games-list {
            max-height: 300px;
            /* Limit height */
            overflow-y: auto;
            transition: max-height 0.3s ease;
            position: relative;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-color) var(--card-bg);
        }

        /* Collapsed state */
        #favorite-games-list.collapsed {
            max-height: 150px;
            /* Show fewer items when collapsed */
        }

        /* Style for the show more/less button */
        .show-more-btn {
            width: 100%;
            padding: 8px;
            background: linear-gradient(to bottom,
                    rgba(30, 30, 46, 0) 0%,
                    var(--card-bg) 20%);
            border: none;
            color: var(--accent-color);
            cursor: pointer;
            position: sticky;
            bottom: 0;
            text-align: center;
            font-size: 0.9rem;
        }

        .show-more-btn:hover {
            color: var(--text-primary);
        }

        /* Compact style for favorite game items */
        #favorite-games-list li {
            padding: 6px 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        #favorite-games-list li img {
            width: 40px;
            /* Smaller images */
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
        }

        #wishlisted-games-list {
            max-height: 300px;
            overflow-y: auto;
            transition: max-height 0.3s ease;
            position: relative;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-color) var(--card-bg);
        }

        #wishlisted-games-list.collapsed {
            max-height: 150px;
        }

        #wishlisted-games-list li {
            padding: 6px 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        #wishlisted-games-list li img {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
        }

        .game-counter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 24px;
            height: 24px;
            padding: 0 8px;
            font-size: 0.75rem;
            font-weight: 500;
            background: rgba(106, 90, 205, 0.2);
            color: var(--accent-color);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        /* Arrow icon */
        .section-toggle-icon {
            font-size: 0.8rem;
            color: var(--accent-color);
            opacity: 0.7;
            transition: transform 0.3s ease;
        }

        .sidebar-section.active .section-toggle-icon {
            transform: rotate(180deg);
        }

        /* Hover effects */
        .sidebar-section h3:hover .game-counter {
            background: rgba(106, 90, 205, 0.3);
            color: white;
        }

        .sidebar-section h3:hover .section-toggle-icon {
            opacity: 1;
        }
    </style>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <!-- 1. Favorite Games Section -->
            <div class="sidebar-section" id="favorite-games-section">
                <h3 onclick="toggleSection('favorite-games-list')">
                    Favorite Games <span class="game-counter" id="favorite-counter">0</span>
                </h3>
                <ul id="favorite-games-list"></ul>
            </div>

            <!-- 2. Wishlisted Games Section -->
            <div class="sidebar-section" id="wishlisted-games-section">
                <h3 onclick="toggleSection('wishlisted-games-list')">
                    Wishlisted Games <span class="game-counter" id="wishlisted-counter">0</span>
                </h3>
                <ul id="wishlisted-games-list">
                    <!-- Wishlisted games will be dynamically added here -->
                </ul>
            </div>

            <!-- 3. Categories Section -->
            <div class="sidebar-section" id="categories-section">
                <h3 onclick="toggleCategories()">Categories</h3>
                <ul id="genre-filter-list">
                    <li data-genre="all" class="active">All Games</li>
                    <li data-genre="sci-fi">Sci-Fi Games</li>
                    <li data-genre="action">Action Games</li>
                    <li data-genre="horror">Horror Games</li>
                    <li data-genre="shooter">Shooter Games</li>
                    <li data-genre="co-op">Co-Op Games</li>
                    <li data-genre="upcoming">Upcoming Games</li>
                    <li data-genre="free">Free Games</li>
                </ul>
            </div>

            <!-- 4. Free Games Section -->
            <div class="sidebar-section">
                <h3 onclick="toggleSection('free-games-list')">Free Games</h3>
                <ul id="free-games-list">
                    <!-- Free games will be dynamically added here -->
                </ul>
            </div>

            <!-- 5. Release Year & Month Section -->
            <div class="sidebar-section year-month-filter">
                <h3>Release Year & Month</h3>
                <ul class="year-filter-list" id="year-filter-list">
                    <!-- Years will be dynamically added here -->
                </ul>
            </div>
        </div>

        <!-- Game List -->
        <!-- Game List Container -->
        <div class="game-list-container">
            <div class="search-bar">
                <input type="text" class="search-input" id="game-search" placeholder="Search games...">
                <i class="fas fa-search search-icon" onclick="searchGames()"></i>
            </div>
            <div class="game-list" id="game-list">
                <!-- Game cards will be dynamically added here -->
            </div>
        </div>
        <!-- Add New Game Button -->
        <button class="add-game-button" onclick="toggleAddGameSection()">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Overlay -->
        <div class="overlay" onclick="toggleAddGameSection()"></div>

        <!-- Add Game Section -->
        <div class="add-game-section">
            <button class="close-add-game" onclick="toggleAddGameSection()"><i class="fas fa-times"></i></button>
            <h2>Add New Game</h2>
            <form class="add-game-form" id="add-game-form">
                <input type="text" placeholder="Game Name" id="game-name" required>
                <input type="url" placeholder="Game Image URL" id="game-image">
                <!-- Secondary Images URLs -->
                <textarea placeholder="Extra Image URLs (comma separated)" id="extra-image-urls" rows="2"></textarea>
                <!-- Multi-select for Genres -->
                <div class="multi-select-container">
                    <div class="multi-select-tags" id="genre-tags"></div>
                    <input type="text" placeholder="Select Genres" id="genre-input" readonly>
                    <div class="multi-select-dropdown" id="genre-dropdown">
                        <label><input type="checkbox" value="sci-fi"> Sci-Fi</label>
                        <label><input type="checkbox" value="action"> Action</label>
                        <label><input type="checkbox" value="horror"> Horror</label>
                        <label><input type="checkbox" value="shooter"> Shooter</label>
                        <label><input type="checkbox" value="co-op"> Co-Op</label>
                        <label><input type="checkbox" value="rpg"> RPG</label>
                        <label><input type="checkbox" value="strategy"> Strategy</label>
                        <!-- Text Input for Custom Genre -->
                        <input type="text" placeholder="Add Custom Genre" id="custom-genre-input"
                            style="margin-top: 5px; width: calc(100% - 12px); padding: 8px; border: 1px solid #a0a0a0; border-radius: 4px;">
                        <button type="button" onclick="addCustomGenre()"
                            style="margin-top: 5px; padding: 8px 10px; background-color: #6a5acd; color: white; border: none; border-radius: 4px; cursor: pointer;">Add
                            Genre</button>

                    </div>
                </div>

                <!-- Release Date Input Group -->
                <div class="release-date-group">
                    <h4>Release Date</h4>
                    <div class="release-date-item">
                        <i class="fas fa-calendar-alt"></i>
                        <input type="text" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" id="game-release-date-start"
                            class="release-date-input" oninput="formatAnyDate(this)">
                        <input type="text" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" id="game-release-date-end"
                            class="release-date-input" oninput="formatAnyDate(this)">
                        <input type="date" id="game-release-date-calendar" style="display: none;">
                    </div>
                </div>

                <!-- Beta Release Date Input Group -->
                <div class="beta-release-group">
                    <h4>Beta Release Date (Optional)</h4>
                    <div class="beta-release-item">
                        <i class="fas fa-calendar-alt"></i>
                        <input type="text" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" id="game-beta-date-start"
                            class="beta-release-input" oninput="formatAnyDate(this)">
                        <input type="text" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" id="game-beta-date-end"
                            class="beta-release-input" oninput="formatAnyDate(this)">
                        <input type="date" id="game-beta-date-calendar" style="display: none;">
                    </div>
                </div>

                <!-- Alpha Release Group-->
                <div class="alpha-release-group">
                    <h4>Alpha Release Date (Optional)</h4>
                    <div class="alpha-release-item">
                        <i class="fas fa-calendar-alt"></i>
                        <input type="text" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" id="game-alpha-date-start"
                            class="alpha-release-input" oninput="formatAnyDate(this)">
                        <input type="text" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" id="game-alpha-date-end"
                            class="alpha-release-input" oninput="formatAnyDate(this)">
                        <input type="date" id="game-alpha-date-calendar" style="display: none;">
                    </div>
                </div>

                <!-- Early Access Release Date Input Group -->
                <div class="early-access-group">
                    <h4>Early Access Release Date (Optional)</h4>
                    <div class="early-access-item">
                        <i class="fas fa-calendar-alt"></i>
                        <input type="text" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" id="game-early-access-date-start"
                            class="early-access-input" oninput="formatAnyDate(this)">
                        <input type="text" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" id="game-early-access-date-end"
                            class="early-access-input" oninput="formatAnyDate(this)">
                        <input type="date" id="game-early-access-date-calendar" style="display: none;">
                    </div>
                </div>
                <!-- Developer & Publisher -->
                <div class="developer-publisher-group">
                    <h4>Developer & Publisher (Optional)</h4>
                    <div>
                        <input type="text" placeholder="Developer" id="game-developer">
                    </div>
                    <div>
                        <input type="text" placeholder="Publisher" id="game-publisher">
                    </div>
                </div>

                <!-- Special Quote Input -->
                <div class="special-quote-group">
                    <h4>Special Quote (Optional)</h4>
                    <input type="text" placeholder="e.g. One developer made" id="game-special-quote">
                </div>

                <!-- Multi-select for Platforms -->
                <div class="multi-select-container">
                    <div class="multi-select-tags" id="platform-tags"></div>
                    <input type="text" placeholder="Select Platforms" id="platform-input" readonly>
                    <div class="multi-select-dropdown" id="platform-dropdown">
                        <label><input type="checkbox" value="windows"> Windows</label>
                        <label><input type="checkbox" value="linux"> Linux</label>
                        <label><input type="checkbox" value="macos"> macOS</label>
                        <label><input type="checkbox" value="android"> Android</label>
                        <label><input type="checkbox" value="ios"> iOS</label>
                        <label><input type="checkbox" value="pc"> PC</label>
                        <label><input type="checkbox" value="xbox"> Xbox</label>
                        <label><input type="checkbox" value="playstation"> PlayStation</label>
                        <label><input type="checkbox" value="nintendo"> Nintendo</label>
                        <label><input type="checkbox" value="mobile"> Mobile</label>
                        <!-- Text Input for Custom Platform -->
                        <input type="text" placeholder="Add Custom Platform" id="custom-platform-input"
                            style="margin-top: 5px; width: calc(100% - 12px); padding: 8px; border: 1px solid #a0a0a0; border-radius: 4px;">
                        <button type="button" onclick="addCustomPlatform()"
                            style="margin-top: 5px; padding: 8px 10px; background-color: #6a5acd; color: white; border: none; border-radius: 4px; cursor: pointer;">Add
                            Platform</button>
                    </div>
                </div>

                <!-- Multi-select for Stores -->
                <div class="multi-select-container">
                    <div class="multi-select-tags" id="store-tags"></div>
                    <input type="text" placeholder="Select Stores" id="store-input" readonly>
                    <div class="multi-select-dropdown" id="store-dropdown">
                        <label><input type="checkbox" value="steam"> Steam</label>
                        <label><input type="checkbox" value="epic"> Epic Games</label>
                        <label><input type="checkbox" value="gog"> GOG</label>
                        <label><input type="checkbox" value="xbox-store"> Xbox Store</label>
                        <label><input type="checkbox" value="playstation-store"> PlayStation Store</label>
                        <label><input type="checkbox" value="itchio"> Itch.io</label>
                        <!-- Text Input for Custom Store -->
                        <input type="text" placeholder="Add Custom Store" id="custom-store-input"
                            style="margin-top: 5px; width: calc(100% - 12px); padding: 8px; border: 1px solid #a0a0a0; border-radius: 4px;">
                        <button type="button" onclick="addCustomStore()"
                            style="margin-top: 5px; padding: 8px 10px; background-color: #6a5acd; color: white; border: none; border-radius: 4px; cursor: pointer;">Add
                            Store </button>
                    </div>
                </div>
                <!-- Multi-select for Mod Links -->
                <div class="multi-select-container">
                    <div class="multi-select-tags" id="mod-tags"></div>
                    <input type="text" placeholder="Select Mods" id="mod-input" readonly>
                    <div class="multi-select-dropdown" id="mod-dropdown">
                        <input type="text" placeholder="Add Mod links (comma separated)" id="custom-mod-input"
                            style="margin-top: 5px; width: calc(100% - 12px); padding: 8px; border: 1px solid #a0a0a0; border-radius: 4px;">
                        <button type="button" onclick="addCustomModLinks()"
                            style="margin-top: 5px; padding: 8px 10px; background-color: #6a5acd; color: white; border: none; border-radius: 4px; cursor: pointer;">Add
                            Mod Link</button>
                    </div>
                </div>
                <!-- Subscription Services Multi-select -->
                <div class="multi-select-container">
                    <div class="multi-select-tags" id="subscription-tags"></div>
                    <input type="text" placeholder="Select Subscription Services" id="subscription-input" readonly>
                    <div class="multi-select-dropdown" id="subscription-dropdown">
                        <label><input type="checkbox" value="xbox-game-pass"> Xbox Game Pass</label>
                        <label><input type="checkbox" value="playstation-plus"> PlayStation Plus</label>
                        <label><input type="checkbox" value="ubisoft-plus"> Ubisoft+</label>
                        <!-- Add more options here as needed -->
                        <input type="text" placeholder="Add Custom Subscription" id="custom-subscription-input"
                            style="margin-top: 5px; width: calc(100% - 12px); padding: 8px; border: 1px solid #a0a0a0; border-radius: 4px;">
                        <button type="button" onclick="addCustomSubscription()"
                            style="margin-top: 5px; padding: 8px 10px; background-color: #6a5acd; color: white; border: none; border-radius: 4px; cursor: pointer;">Add
                            Subscription</button>
                    </div>
                </div>
                <!-- DLC and Expansion Information -->
                <div class="dlc-list-container">
                    <h4>DLCs and Expansions (Optional)</h4>
                    <div id="dlc-list">
                        <!-- DLC items will be added here -->
                    </div>
                    <button type="button" onclick="addNewDlc()" class="add-dlc-button">Add DLC/Expansion</button>
                </div>
                <!-- Input for Trailer Link -->
                <input type="url" placeholder="Game Trailer Link" id="game-trailer-link">
                <!-- Changed the ID and Allow decimal numbers in price input -->
                <input type="number" placeholder="Price (0 for Free)" id="game-price" step="0.01" value="0" min="0">
                <textarea placeholder="Game Details" id="game-details" rows="4"></textarea>
                <input type="url" placeholder="More Details Links" id="game-links">
                <button type="submit" class="btn btn-details">Add Game</button>
            </form>
        </div>

        <div class="sidebar-toggle" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </div>
    </div>

    <!-- Game Details Modal -->
    <div class="game-details-modal" id="game-details-modal">
        <div class="game-details-content" id="game-details-content">
            <!-- Content will be dynamically inserted here -->
        </div>
    </div>

    <!-- Image Popup -->
    <div class="image-popup">
        <span class="close-btn"></span>
        <span class="prev-btn"></span>
        <img src="" alt="Image">
        <span class="next-btn"></span>
    </div>

    <!-- YouTube Trailer Modal -->
    <div class="youtube-modal" id="youtube-modal">
        <div class="youtube-modal-content">
            <span class="youtube-modal-close" onclick="closeYouTubeModal()"></span>
            <iframe id="youtube-iframe" class="youtube-iframe" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>

    <script>
        // Store added games with local storage and JSON export
        let games = [];
        // Initialize search input globally
        const searchInput = document.getElementById('game-search');
        let activeGenre = 'all';
        let activeYear = 'all';
        let activeMonth = null; // Variable to track the active month
        // Define an object to store years and their respective months
        let yearsAndMonths = {};

        // Array to store DLC data for each game
        let gameDlcData = {};

        async function fetchGames() {
            try {
                const url = 'https://raw.githubusercontent.com/Craftsman-Sakib/task-manager/main/game_pulse_data.json';
                console.log('Attempting to fetch from:', url);

                const response = await fetch(url);

                console.log('Response status:', response.status);
                console.log('Response headers:', Object.fromEntries(response.headers.entries()));

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('Error response text:', errorText);
                    throw new Error(`Network response was not ok. Status: ${response.status}`);
                }

                const data = await response.json();
                console.log('Fetched games:', data);

                if (Array.isArray(data)) {
                    games = data;
                    // Populate the years and months
                    populateYearsAndMonths();
                    renderAllGames();
                    filterAndSearchGames();
                    populateFreeGamesList();
                    populateWishlistedGames();
                    populateFavoriteGames();
                } else {
                    console.error('Fetched data is not an array:', data);
                    games = [];
                }
            } catch (error) {
                console.error('Detailed fetch error:', error);
                games = [];
                alert('Failed to load games. Please check the data source or format.');
            }
        }

        // Function to update the remote JSON file
        async function updateRemoteGames() {
            try {
                const githubToken = '';
                const owner = 'Craftsman-Sakib';
                const repo = 'task-manager';
                const path = 'game_pulse_data.json';

                // Get current file's SHA
                const getFileResponse = await fetch(
                    `https://api.github.com/repos/${owner}/${repo}/contents/${path}`,
                    {
                        headers: {
                            'Authorization': `token ${githubToken}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );

                if (!getFileResponse.ok) {
                    throw new Error('Failed to retrieve file information');
                }

                const fileInfo = await getFileResponse.json();

                // Fix: Properly encode content with UTF-8 support
                const content = JSON.stringify(games, null, 2);
                const encodedContent = btoa(unescape(encodeURIComponent(content)));

                // Update file
                const updateResponse = await fetch(
                    `https://api.github.com/repos/${owner}/${repo}/contents/${path}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${githubToken}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'Update game data',
                            content: encodedContent,
                            sha: fileInfo.sha
                        })
                    }
                );

                if (!updateResponse.ok) {
                    const errorBody = await updateResponse.text();
                    throw new Error(`Failed to update remote games: ${errorBody}`);
                }

                console.log('Games updated successfully');
            } catch (error) {
                console.error('Error updating games:', error);
                alert('Failed to update game list. Please try again.');
            }
        }

        // Function to save games to local storage and generate JSON file
        function saveGames() {
            localStorage.setItem('games', JSON.stringify(games));

            // Create a downloadable JSON file
            const gameJson = JSON.stringify(games, null, 2);
            const blob = new Blob([gameJson], { type: 'application/json' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'game_pulse_data.json';
            link.click();
        }

        function normalizeReleaseDate(releaseDate) {
            // If releaseDate is null/undefined, return default object
            if (!releaseDate) {
                return { start: null, end: null };
            }

            // If releaseDate is a string, convert to object format
            if (typeof releaseDate === 'string') {
                return { start: releaseDate, end: null };
            }

            // If releaseDate is an object but missing start
            if (typeof releaseDate === 'object' && !releaseDate.start) {
                return { start: null, end: null };
            }

            // Return the object with null for missing end date
            return {
                start: releaseDate.start,
                end: releaseDate.end || null
            };
        }

        function populateYearsAndMonths() {
            yearsAndMonths = {};
            games.forEach(game => {
                const releaseDate = normalizeReleaseDate(game.releaseDate);
                if (!releaseDate || !releaseDate.start) return;

                try {
                    const dateObj = new Date(releaseDate.start);
                    const year = dateObj.getFullYear();
                    const month = dateObj.getMonth();

                    if (!yearsAndMonths[year]) {
                        yearsAndMonths[year] = new Set();
                    }
                    yearsAndMonths[year].add(month);

                    // If there's an end date, add those months too
                    if (releaseDate.end) {
                        const endDateObj = new Date(releaseDate.end);
                        const endYear = endDateObj.getFullYear();
                        const endMonth = endDateObj.getMonth();

                        // Add all months between start and end date
                        let currentDate = new Date(dateObj);
                        while (currentDate <= endDateObj) {
                            const currentYear = currentDate.getFullYear();
                            const currentMonth = currentDate.getMonth();

                            if (!yearsAndMonths[currentYear]) {
                                yearsAndMonths[currentYear] = new Set();
                            }
                            yearsAndMonths[currentYear].add(currentMonth);

                            currentDate.setMonth(currentDate.getMonth() + 1);
                        }
                    }
                } catch (error) {
                    console.error("Invalid date:", releaseDate.start, error);
                }
            });

            // Convert Sets to Arrays
            for (const year in yearsAndMonths) {
                yearsAndMonths[year] = Array.from(yearsAndMonths[year]).sort((a, b) => a - b);
            }
            renderYearFilterList();
        }

        // Multi-select functionality
        function setupMultiSelect(inputId, dropdownId, tagsId) {
            const input = document.getElementById(inputId);
            const dropdown = document.getElementById(dropdownId);
            const tags = document.getElementById(tagsId);
            const checkboxes = dropdown.querySelectorAll('input[type="checkbox"]');

            // Toggle dropdown visibility
            input.addEventListener('click', () => {
                dropdown.classList.toggle('active');
                input.focus();
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!dropdown.contains(e.target) && e.target !== input) {
                    dropdown.classList.remove('active');
                }
            });

            // Handle checkbox changes
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    updateTags(checkbox, tags);
                });
            });
        }

        function updateTags(checkbox, tagsContainer) {
            const value = checkbox.value;
            const tagId = `tag-${value}`;

            if (checkbox.checked) {
                // Create tag
                const tag = document.createElement('div');
                tag.className = 'multi-select-tag';
                tag.id = tagId;
                tag.innerHTML = `
                                ${value}
                                <span class="remove-tag" onclick="removeTag('${tagId}', '${value}')"></span>
                            `;
                tagsContainer.appendChild(tag);
            } else {
                // Remove tag
                const existingTag = document.getElementById(tagId);
                if (existingTag) {
                    tagsContainer.removeChild(existingTag);
                }
            }
        }

        function removeTag(tagId, value) {
            // Remove tag from DOM
            const tag = document.getElementById(tagId);
            if (tag) {
                tag.parentElement.removeChild(tag);
            }

            // Uncheck corresponding checkbox
            const checkbox = document.querySelector(`input[type="checkbox"][value="${value}"]`);
            if (checkbox) {
                checkbox.checked = false;
            }
        }
        function addCustomGenre() {
            const customGenreInput = document.getElementById('custom-genre-input');
            const customGenre = customGenreInput.value.trim();
            if (customGenre) {
                const dropdown = document.getElementById('genre-dropdown');
                const label = document.createElement('label');
                label.innerHTML = `<input type="checkbox" value="${customGenre}"> ${customGenre}`;
                dropdown.appendChild(label);

                // Add event listener to new checkbox
                const checkbox = label.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', () => {
                    updateTags(checkbox, document.getElementById('genre-tags'));
                });
                customGenreInput.value = '';
            }
        }

        function addCustomPlatform() {
            const customPlatformInput = document.getElementById('custom-platform-input');
            const customPlatform = customPlatformInput.value.trim();
            if (customPlatform) {
                const dropdown = document.getElementById('platform-dropdown');
                const label = document.createElement('label');
                label.innerHTML = `<input type="checkbox" value="${customPlatform}"> ${customPlatform}`;
                dropdown.appendChild(label);

                // Add event listener to new checkbox
                const checkbox = label.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', () => {
                    updateTags(checkbox, document.getElementById('platform-tags'));
                });
                customPlatformInput.value = '';
            }
        }

        function addCustomStore() {
            const customStoreInput = document.getElementById('custom-store-input');
            const customStore = customStoreInput.value.trim();
            if (customStore) {
                const dropdown = document.getElementById('store-dropdown');
                const label = document.createElement('label');
                label.innerHTML = `<input type="checkbox" value="${customStore}"> ${customStore}`;
                dropdown.appendChild(label);

                // Add event listener to new checkbox
                const checkbox = label.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', () => {
                    updateTags(checkbox, document.getElementById('store-tags'));
                });
                customStoreInput.value = '';
            }
        }
        function addCustomModLinks() {
            const customModInput = document.getElementById('custom-mod-input');
            const customModLinks = customModInput.value.split(',').map(link => link.trim()).filter(Boolean);

            if (customModLinks.length > 0) {
                const dropdown = document.getElementById('mod-dropdown');
                customModLinks.forEach(modLink => {
                    const label = document.createElement('label');
                    label.innerHTML = `<input type="checkbox" value="${modLink}"> ${modLink}`;
                    dropdown.appendChild(label);
                    // Add event listener to new checkbox
                    const checkbox = label.querySelector('input[type="checkbox"]');
                    checkbox.addEventListener('change', () => {
                        updateTags(checkbox, document.getElementById('mod-tags'));
                    });
                });
                customModInput.value = '';
            }
        }
        function addCustomSubscription() {
            const customSubscriptionInput = document.getElementById('custom-subscription-input');
            const customSubscription = customSubscriptionInput.value.trim();

            if (customSubscription) {
                const dropdown = document.getElementById('subscription-dropdown');
                const label = document.createElement('label');
                label.innerHTML = `<input type="checkbox" value="${customSubscription}"> ${customSubscription}`;
                dropdown.appendChild(label);

                // Add event listener to new checkbox
                const checkbox = label.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', () => {
                    updateTags(checkbox, document.getElementById('subscription-tags'));
                });
                customSubscriptionInput.value = '';
            }
        }

        // New function to add DLC items dynamically
        function addNewDlc() {
            const dlcList = document.getElementById('dlc-list');
            const newDlcItem = document.createElement('div');
            newDlcItem.className = 'dlc-item';
            newDlcItem.innerHTML = `
                    <label for="dlc-name">Name:</label>
                    <input type="text" id="dlc-name" placeholder="DLC Name" class="dlc-input" data-field="name">
                    <label for="dlc-release-date">Release Date:</label>
                    <input type="text" id="dlc-release-date" placeholder="YYYY or YYYY-MM or YYYY-MM-DD" class="dlc-input" data-field="releaseDate" oninput="formatAnyDate(this)">
                    <label for="dlc-price">Price:</label>
                    <input type="number" id="dlc-price" placeholder="Price (0 for Free)" class="dlc-input" data-field="price" step="0.01" value="0" min="0">
                    <label for="dlc-image">Image Link:</label>
                    <input type="url" id="dlc-image" placeholder="DLC Image URL" class="dlc-input" data-field="image">
                    <button type="button" onclick="removeDlcItem(this)">Remove</button>
                `;
            dlcList.appendChild(newDlcItem);
        }

        // New function to remove DLC items
        function removeDlcItem(button) {
            const dlcItem = button.parentNode;
            dlcItem.remove();
        }

        function convertGoogleDriveLink(url) {
            if (!url) return '';

            // Check if it's a Google Drive link
            if (url.includes('drive.google.com')) {
                // Extract file ID from the URL
                const fileId = url.match(/\/d\/(.*?)\//) || url.match(/id=(.*?)&/);

                if (fileId && fileId[1]) {
                    // Convert to direct download link
                    return `https://drive.google.com/uc?export=view&id=${fileId[1]}`;
                }
            }
            return url;
        }

        document.getElementById('add-game-form').addEventListener('submit', async function (event) {
            event.preventDefault();

            // Helper function to get selected values from multi-select
            function getMultiSelectValues(dropdownId) {
                const checkboxes = document.querySelectorAll(`#${dropdownId} input[type="checkbox"]:checked`);
                return Array.from(checkboxes).map(cb => cb.value);
            }
            // Updated function to get DLC data
            function getDlcData() {
                const dlcItems = document.querySelectorAll('#dlc-list .dlc-item');
                return Array.from(dlcItems).map(item => {
                    const dlc = {};
                    item.querySelectorAll('.dlc-input').forEach(input => {
                        const field = input.dataset.field;
                        dlc[field] = input.type === 'number' ? parseFloat(input.value) : input.value;
                    });
                    return dlc;
                });
            }

            const rawGameImage = document.getElementById('game-image').value;
            const gameImage = rawGameImage.includes('drive.google.com')
                ? convertGoogleDriveLink(rawGameImage)
                : rawGameImage || '/api/placeholder/200/300';
            const gameName = document.getElementById('game-name').value;
            const extraImageUrlsText = document.getElementById('extra-image-urls').value;
            const extraImageUrls = extraImageUrlsText
                ? extraImageUrlsText.split(',')
                    .map(url => url.trim())
                    .filter(Boolean)
                    .map(url => url.includes('drive.google.com') ? convertGoogleDriveLink(url) : url)
                : [];
            const gameGenre = getMultiSelectValues('genre-dropdown');
            const gameReleaseDateStart = document.getElementById('game-release-date-start').value;
            const gameReleaseDateEnd = document.getElementById('game-release-date-end').value;
            const gameBetaDateStart = document.getElementById('game-beta-date-start').value;
            const gameBetaDateEnd = document.getElementById('game-beta-date-end').value;
            const gameAlphaDateStart = document.getElementById('game-alpha-date-start').value;
            const gameAlphaDateEnd = document.getElementById('game-alpha-date-end').value;
            const gameEarlyAccessDateStart = document.getElementById('game-early-access-date-start').value;
            const gameEarlyAccessDateEnd = document.getElementById('game-early-access-date-end').value;
            const gameDeveloper = document.getElementById('game-developer').value;
            const gamePublisher = document.getElementById('game-publisher').value;
            const gameSpecialQuote = document.getElementById('game-special-quote').value; // Get the special quote
            const gamePlatform = getMultiSelectValues('platform-dropdown');
            const gameStore = getMultiSelectValues('store-dropdown');
            const gameModLinks = getMultiSelectValues('mod-dropdown');
            const gameSubscriptions = getMultiSelectValues('subscription-dropdown');
            const gameTrailerLink = document.getElementById('game-trailer-link').value;
            const gamePrice = parseFloat(document.getElementById('game-price').value);
            const gameDetails = document.getElementById('game-details').value;
            const gameLinks = document.getElementById('game-links').value;
            const gameDlc = getDlcData();

            // Create game object
            const game = {
                id: Date.now(),
                name: gameName,
                image: gameImage,
                extraImages: extraImageUrls,
                genre: gameGenre,
                releaseDate: {
                    start: gameReleaseDateStart,
                    end: gameReleaseDateEnd
                },
                betaDate: {
                    start: gameBetaDateStart,
                    end: gameBetaDateEnd
                },
                alphaDate: {
                    start: gameAlphaDateStart,
                    end: gameAlphaDateEnd
                },
                earlyAccessDate: {
                    start: gameEarlyAccessDateStart,
                    end: gameEarlyAccessDateEnd
                },
                developer: gameDeveloper,
                publisher: gamePublisher,
                specialQuote: gameSpecialQuote,
                platform: gamePlatform,
                store: gameStore,
                modLinks: gameModLinks,
                subscriptions: gameSubscriptions,
                trailerLink: gameTrailerLink, // Added for trailer
                price: gamePrice,
                details: gameDetails,
                links: gameLinks,
                dlc: gameDlc
            };

            // Add to games array
            games.push(game);

            // Render game card
            renderGameCard(game);

            // Update remote games instead of local storage
            await updateRemoteGames();

            // Close add game section
            toggleAddGameSection();

            // Reset form and multi-select tags
            event.target.reset();
            document.getElementById('genre-tags').innerHTML = '';
            document.getElementById('platform-tags').innerHTML = '';
            document.getElementById('store-tags').innerHTML = '';
            document.getElementById('mod-tags').innerHTML = '';
            document.getElementById('subscription-tags').innerHTML = '';
            document.getElementById('dlc-list').innerHTML = '';
        });

        // Function to render all games
        function renderAllGames() {
            const gameList = document.getElementById('game-list');
            gameList.innerHTML = ''; // Clear existing games
            games.forEach(renderGameCard);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            fetchGames();

            // Setup multi-select dropdowns
            setupMultiSelect('genre-input', 'genre-dropdown', 'genre-tags');
            setupMultiSelect('platform-input', 'platform-dropdown', 'platform-tags');
            setupMultiSelect('store-input', 'store-dropdown', 'store-tags');
            setupMultiSelect('mod-input', 'mod-dropdown', 'mod-tags');
            setupMultiSelect('subscription-input', 'subscription-dropdown', 'subscription-tags');

            // Add event listener to the search input
            searchInput.addEventListener('input', filterAndSearchGames);
            // Add event listeners to genre and year filter lists
            document.getElementById('genre-filter-list').addEventListener('click', filterAndSearchGames);
            document.getElementById('year-filter-list').addEventListener('click', filterAndSearchGames);
            // Initially, render all games or apply any default filters you want
            renderAllGames();

            // Add event listeners to image popup controls
            document.querySelector('.image-popup .close-btn').addEventListener('click', closeImagePopup);
            document.querySelector('.image-popup .prev-btn').addEventListener('click', showPreviousImage);
            document.querySelector('.image-popup .next-btn').addEventListener('click', showNextImage);

            // Add event listeners to date input fields
            addDateInputListeners();
            updateGameCounters();
        });

        // Optional: Add export functionality for manual backup
        function exportGames() {
            const gameJson = JSON.stringify(games, null, 2);
            const blob = new Blob([gameJson], { type: 'application/json' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'game_pulse_backup.json';
            link.click();
        }

        // Optional: Add import functionality
        async function importGames(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = async (e) => {
                    try {
                        const importedGames = JSON.parse(e.target.result);
                        games = importedGames;
                        renderAllGames();
                        await updateRemoteGames();
                        alert('Games imported successfully!');
                    } catch (error) {
                        console.error('Error importing games:', error);
                        alert('Failed to import games. Please check the file format.');
                    }
                };
                reader.readAsText(file);
            }
        }

        function formatFullDate(dateString) {
            if (!dateString) return 'Release date not specified';

            // Regular expressions for different date formats
            const fullDateRegex = /^\d{4}-\d{2}-\d{2}$/; // YYYY-MM-DD
            const monthYearRegex = /^\d{4}-\d{2}$/; // YYYY-MM
            const yearRegex = /^\d{4}$/; // YYYY
            const dateTimeRegex = /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/; // YYYY-MM-DDTHH:MM

            const date = new Date(dateString);

            if (dateTimeRegex.test(dateString)) {
                // Format for YYYY-MM-DDTHH:MM
                const options = {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                };
                return date.toLocaleDateString('en-US', options);
            } else if (fullDateRegex.test(dateString)) {
                // Format for YYYY-MM-DD
                const options = {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                };
                return date.toLocaleDateString('en-US', options);
            } else if (monthYearRegex.test(dateString)) {
                // Format for YYYY-MM
                const options = {
                    year: 'numeric',
                    month: 'long'
                };
                return date.toLocaleDateString('en-US', options);
            } else if (yearRegex.test(dateString)) {
                // Format for YYYY
                const options = {
                    year: 'numeric'
                };
                return date.toLocaleDateString('en-US', options);
            } else {
                return 'Invalid date format';
            }
        }

        // Function to format only the date part
        function formatDate(dateString) {
            if (!dateString) return 'Date not specified';

            try {
                const date = new Date(dateString);
                const options = {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                };
                return date.toLocaleDateString('en-US', options);
            } catch (error) {
                return 'Invalid date format';
            }
        }

        function renderDlcSection(dlc) {
            if (!dlc || dlc.length === 0) return '';

            const dlcHtml = dlc.map(item => `
                    <div class="dlc-item">
                        <strong>${item.name}</strong>
                        <span>Release Date: ${formatDate(item.releaseDate)}</span>
                        <span>Price: ${item.price == 0 ? 'Free' : '$' + parseFloat(item.price).toFixed(2)}</span>
                        ${item.image ? `<img src="${item.image}" alt="${item.name}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 5px; margin-top: 5px;">` : ''}
                    </div>
                `).join('');

            return `
                    <div class="dlc-container">
                        <h4>DLCs and Expansions</h4>
                        <div class="dlc-list">${dlcHtml}</div>
                    </div>
                `;
        }

        function setupWishlistedGamesList() {
            const wishlistedGamesList = document.getElementById('wishlisted-games-list');
            const showMoreBtn = document.createElement('button');
            showMoreBtn.className = 'show-more-btn';
            showMoreBtn.innerHTML = '<i class="fas fa-chevron-down"></i> Show More';

            // Add the button after the list
            wishlistedGamesList.parentNode.insertBefore(showMoreBtn, wishlistedGamesList.nextSibling);

            // Initially collapse the list
            wishlistedGamesList.classList.add('collapsed');

            showMoreBtn.addEventListener('click', () => {
                wishlistedGamesList.classList.toggle('collapsed');
                showMoreBtn.innerHTML = wishlistedGamesList.classList.contains('collapsed')
                    ? '<i class="fas fa-chevron-down"></i> Show More'
                    : '<i class="fas fa-chevron-up"></i> Show Less';
            });
        }

        // Function to populate the wishlisted games list in the sidebar
        function populateWishlistedGames() {
            const wishlistedGamesList = document.getElementById('wishlisted-games-list');
            wishlistedGamesList.innerHTML = '';

            const wishlistedGamesIds = JSON.parse(localStorage.getItem('wishlistedGames')) || [];
            const wishlistedGames = games.filter(game => wishlistedGamesIds.includes(game.id));

            if (wishlistedGames.length === 0) {
                const emptyMessage = document.createElement('li');
                emptyMessage.textContent = "No wishlisted games yet!";
                wishlistedGamesList.appendChild(emptyMessage);
                return;
            }

            wishlistedGames.forEach(game => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
            <img src="${game.image}" alt="${game.name}">
            <span>${game.name}</span>
        `;
                listItem.addEventListener('click', () => {
                    const gameCard = Array.from(document.querySelectorAll(`.game-card`)).find(card => {
                        const titleElement = card.querySelector('.game-card-title');
                        return titleElement && titleElement.textContent === game.name;
                    });
                    if (gameCard) {
                        const detailsButton = gameCard.querySelector('.btn-details');
                        if (detailsButton) {
                            openGameDetails(detailsButton, game.id);
                        }
                    }
                });
                wishlistedGamesList.appendChild(listItem);
            });

            setupWishlistedGamesList();
        }
        // Modify renderGameCard to include price display and wishlist button
        function renderGameCard(game) {
            const gameCard = document.createElement('div');
            gameCard.className = 'game-card';
            gameCard.dataset.genres = Array.isArray(game.genre) ? game.genre.join(',') : game.genre;
            const releaseDates = [
                game.releaseDate && game.releaseDate.start ? game.releaseDate.start : null,
                game.releaseDate && game.releaseDate.end ? game.releaseDate.end : null,
                game.betaDate && game.betaDate.start ? game.betaDate.start : null,
                game.betaDate && game.betaDate.end ? game.betaDate.end : null,
                game.alphaDate && game.alphaDate.start ? game.alphaDate.start : null,
                game.alphaDate && game.alphaDate.end ? game.alphaDate.end : null,
                game.earlyAccessDate && game.earlyAccessDate.start ? game.earlyAccessDate.start : null,
                game.earlyAccessDate && game.earlyAccessDate.end ? game.earlyAccessDate.end : null
            ];

            let allYears = new Set();
            let allMonths = new Set();

            releaseDates.forEach(dateString => {
                if (dateString) {
                    const date = new Date(dateString);
                    allYears.add(date.getFullYear().toString());
                    allMonths.add(date.getMonth());
                }
            });

            gameCard.dataset.year = Array.from(allYears).join(',');
            gameCard.dataset.month = Array.from(allMonths).join(',');
            gameCard.dataset.releaseDate = game.releaseDate;
            gameCard.dataset.releaseDateStart = game.releaseDate && (typeof game.releaseDate === 'string' ?
                game.releaseDate : game.releaseDate.start) || '';
            gameCard.dataset.releaseDateEnd = game.releaseDate && typeof game.releaseDate === 'object' ?
                game.releaseDate.end || '' : '';

            const gameStatus = determineGameStatus(game.releaseDate);
            function getPriceTag(price) {
                if (price === null || price === undefined || isNaN(parseFloat(price))) {
                    return '<span class="price-tag">Price not confirmed</span>';
                }
                const numericPrice = parseFloat(price);
                return numericPrice === 0 ? '<span class="free-tag">FREE</span>' : `<span class="price-tag">$${numericPrice.toFixed(2)}</span>`;
            }

            function renderTagGroup(items, type, icon) {
                const safeItems = Array.isArray(items) ? items : (items ? [items] : []);
                if (safeItems.length === 0) return '';

                const visibleItems = safeItems.slice(0, 2);
                const overflowCount = safeItems.length > 2 ? safeItems.length - 2 : 0;

                return `
                    <div class="tag-group" data-type="${type}">
                    <div class="tag-group-icon">
                        <i class="fas ${icon}"></i>
                    </div>
                    <div class="tag-group-tags">
                        ${visibleItems.map(item => `<span class="game-tag">${item}</span>`).join('')}
                        ${overflowCount > 0 ? `<span class="tag-overflow">+${overflowCount}</span>` : ''}
                    </div>
                    </div>
                    `;
            }

            // Function to render platform icons
            function renderPlatformIcons(platforms) {
                if (!platforms || platforms.length === 0) return '';

                // Map of platform names to their display names
                const platformDisplayNames = {
                    'windows': 'Windows',
                    'linux': 'Linux',
                    'macos': 'macOS',
                    'android': 'Android',
                    'ios': 'iOS',
                    'pc': 'PC',
                    'xbox': 'Xbox',
                    'playstation': 'PlayStation',
                    'nintendo': 'Nintendo',
                    'mobile': 'Mobile'
                };

                const icons = platforms.map(platform => {
                    const platformLower = platform.toLowerCase();
                    const displayName = platformDisplayNames[platformLower] || platform;
                    return `<span class="platform-icon ${platformLower}" data-platform="${displayName}"></span>`;
                }).join('');

                return `
        <div class="platform-icons-container" title="Available Platforms">
            ${icons}
        </div>
    `;
            }

            // Function to render store icons
            function renderStoreIcons(stores) {
                if (!stores || stores.length === 0) return '';

                const iconMap = {
                    'steam': 'steam.svg',
                    'epic': 'epic.svg',
                    'gog': 'gog.svg',
                    'xbox-store': 'xbox.svg',
                    'playstation-store': 'playstation.svg',
                    'itchio': 'itchio.svg'
                };

                return `
            <div class="store-icons-container">
                ${stores.map(store => `
                    <span class="store-icon ${store.toLowerCase()}" title="${store}"></span>
                `).join('')}
            </div>
        `;
            }
            // Create overlay element
            let overlayClass = '';
            if (gameStatus === 'new') {
                overlayClass = 'new';
            } else if (gameStatus === 'upcoming') {
                overlayClass = 'upcoming';
            }
            const overlay = overlayClass ? `<div class="overlay ${overlayClass}">${gameStatus.toUpperCase()}</div>` : '';

            // Create a div for the favorite icon
            const favoriteIcon = document.createElement('div');
            favoriteIcon.className = 'favorite-icon';
            favoriteIcon.innerHTML = '<i class="fas fa-heart"></i>';
            favoriteIcon.dataset.gameId = game.id; // Set game ID for reference

            function hasValidReleaseDate(game) {
                if (!game.releaseDate) return false;

                const normalized = normalizeReleaseDate(game.releaseDate);
                return normalized.start !== null;
            }

            // Toggle favorite status on click
            favoriteIcon.addEventListener('click', function (event) {
                event.stopPropagation(); // Prevent triggering other click events
                toggleFavorite(this, game.id);
            });

            // Set active class if game is favorited
            if (game.isFavorite) {
                favoriteIcon.classList.add('active');
            }
            // special quote section inside game card
            const specialQuoteSection = game.specialQuote ? `<div class="special-quote">${game.specialQuote}</div>` : '';

            //append price tag in card image

            const priceTag = game.price !== undefined ? getPriceTag(game.price) : '';

            // Render the "More Info" link
            const gameLink = game.links ? `<a href="${game.links}" target="_blank" class="game-card-link">More Info</a>` : '';

            // Add this function to optimize image URLs
            function optimizeImageUrl(url, width = 400) {
                // If it's a Google Drive image, keep the existing optimization
                if (url.includes('drive.google.com')) {
                    return convertGoogleDriveLink(url);
                }

                // Add query parameters for CDN optimization if using a CDN
                // Example for Cloudinary or similar services
                if (url.includes('cloudinary.com')) {
                    return `${url}?w=${width}&q=80&auto=format,compress`;
                }

                return url;
            }

            // Update the image rendering in renderGameCard function
            const optimizedImageUrl = optimizeImageUrl(game.image);
            const imageHtml = `
                <img 
                    src="${optimizedImageUrl}"
                    alt="${game.name}"
                    class="game-card-image"
                    loading="lazy"
                    decoding="async"
                    fetchpriority="high"
                    sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
                    onerror="this.onerror=null; this.src='/path/to/fallback-image.jpg';"
                >`;

            gameCard.innerHTML = `
                <div class="game-card-image-container">
        ${imageHtml}
        ${overlay}
        ${priceTag}
        ${gameLink}
        <div class="favorite-icon" onclick="toggleFavorite(this, ${game.id})">
            <i class="fas fa-heart"></i>
        </div>
    </div>
    
                <div class="game-card-content">
                <div class="game-card-header">
                <h2 class="game-card-title">${game.name}</h2>
                </div>
                <div class="game-card-tags">
                ${renderTagGroup(game.genre, 'genre', 'fa-tags')}
                ${renderPlatformIcons(game.platform)}
                ${renderTagGroup(game.store, 'store', 'fa-store')}
                ${renderTagGroup(game.subscriptions, 'subscription', 'fa-credit-card')}
                ${hasValidReleaseDate(game) ? `
    <div class="tag-group" data-type="year">
        <div class="tag-group-icon">
            <i class="fas fa-calendar"></i>
        </div>
        <div class="tag-group-tags">
            ${(() => {
                        const dates = normalizeReleaseDate(game.releaseDate);
                        return `
                    <span class="game-tag">${formatFullDate(dates.start)}</span>
                    ${dates.end ? `- <span class="game-tag">${formatFullDate(dates.end)}</span>` : ''}
                `;
                    })()}
        </div>
    </div>` : ''}
</div>
                ${specialQuoteSection}
                <div class="game-card-actions">
                    <a href="#" class="btn btn-details" onclick="openGameDetails(this, ${game.id}); return false;">
                    <i class="fas fa-info-circle"></i> Details
                </a>
                    <div class="wishlist-fav-container">
                    ${gameStatus === 'upcoming' ? `
                        <button class="btn btn-wishlist ${game.isWishlisted ? 'active' : ''}" onclick="toggleWishlist(this, ${game.id})">
                            <i class="fas fa-heart"></i> ${game.isWishlisted ? 'Wishlisted' : 'Wishlist'}
                        </button>` : ''}
                    </div>
                </div>
                </div>
                `;
            const actionsDiv = gameCard.querySelector('.game-card-actions');
            document.getElementById('game-list').appendChild(gameCard);
        }
        // Append the modal to the body,not inside the game card

        function createDetailItem(icon, label, value) {
            if (!value || (Array.isArray(value) && value.length === 0)) {
                return '';
            }

            const displayValue = Array.isArray(value) ? value.join(', ') : value;
            return `
                <div class="game-details-item">
                <i class="fas ${icon}"></i>
                <span>${label}: ${displayValue}</span>
                </div>
                `;
        }

        // YouTube modal functions
        function openYouTubeModal(trailerLink) {
            const youtubeModal = document.getElementById('youtube-modal');
            const youtubeIframe = document.getElementById('youtube-iframe');
            const videoId = getYouTubeVideoId(trailerLink);

            if (videoId) {
                youtubeIframe.src = `https://www.youtube.com/embed/${videoId}`;
                youtubeModal.style.display = 'flex';
            } else {
                alert('Invalid YouTube link');
            }
        }

        function closeYouTubeModal() {
            document.getElementById('youtube-modal').style.display = 'none';
            document.getElementById('youtube-iframe').src = '';
        }

        function getYouTubeVideoId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);

            if (match && match[2].length === 11) {
                return match[2];
            } else {
                return null;
            }
        }

        // Image handling functions
        let currentGameImages = [];
        let currentImageIndex = 0;

        // Function to open image in popup
        function openImageInPopup(imageSrc, containerElement) {
            const popup = document.querySelector('.image-popup');
            const popupImage = popup.querySelector('img');

            // Get all images from the current game's additional images container
            currentGameImages = Array.from(containerElement.querySelectorAll('img')).map(img => img.src);
            currentImageIndex = currentGameImages.indexOf(imageSrc);

            popupImage.src = imageSrc;
            popup.classList.add('visible');
        }

        // Function to close the image popup
        function closeImagePopup() {
            const popup = document.querySelector('.image-popup');
            popup.classList.remove('visible');
        }

        // Function to show the next image
        function showNextImage() {
            if (currentGameImages.length > 1) {
                currentImageIndex = (currentImageIndex + 1) % currentGameImages.length;
                const popup = document.querySelector('.image-popup');
                const popupImage = popup.querySelector('img');
                popupImage.src = currentGameImages[currentImageIndex];
            }
        }

        // Function to show the previous image
        function showPreviousImage() {
            if (currentGameImages.length > 1) {
                currentImageIndex = (currentImageIndex - 1 + currentGameImages.length) % currentGameImages.length;
                const popup = document.querySelector('.image-popup');
                const popupImage = popup.querySelector('img');
                popupImage.src = currentGameImages[currentImageIndex];
            }
        }

        // Get the current game card outside of openGameDetails
        let currentDetailsCard = null;

        function openGameDetails(button, gameId) {
            const game = games.find(g => g.id === gameId);
            if (!game) return;

            const modal = document.getElementById('game-details-modal');
            const modalContent = document.getElementById('game-details-content');
            modalContent.innerHTML = '';

            modalContent.innerHTML = `
        <div class="game-details-header">
            <h3>Game Details</h3>
            <button class="close-details" onclick="closeGameDetails()"></button>
        </div>

        <!-- Title Section -->
        <div class="details-title-image-section">
            <img src="${game.image}" alt="${game.name}" class="details-game-image">
            <div>
                <h4 class="details-game-title">${game.name}</h4>
                <div class="dev-publisher-container">
                    ${game.developer ? `<span class="dev-label">Developer:</span> <span class="developer-name">${game.developer}</span>` : ''}
                    ${game.publisher ? `<span class="publisher-label">Publisher:</span> <span class="publisher-name">${game.publisher}</span>` : ''}
                </div>
            </div>
        </div>

        <div class="game-details-grid">
            <!-- Release Information -->
            ${createDetailItem('fa-calendar', 'Release Date', game.releaseDate && game.releaseDate.start ?
                `${formatFullDate(game.releaseDate.start)}${game.releaseDate.end && game.releaseDate.end !== game.releaseDate.start ?
                    ' - ' + formatFullDate(game.releaseDate.end) : ''}` : '')}
            ${game.earlyAccessDate && game.earlyAccessDate.start ?
                    createDetailItem('fa-calendar-check', 'Early Access Date',
                        `${formatFullDate(game.earlyAccessDate.start)}${game.earlyAccessDate.end && game.earlyAccessDate.end !== game.earlyAccessDate.start ?
                            ' - ' + formatFullDate(game.earlyAccessDate.end) : ''}`) : ''}
            ${game.betaDate && game.betaDate.start ?
                    createDetailItem('fa-calendar-alt', 'Beta Release',
                        `${formatFullDate(game.betaDate.start)}${game.betaDate.end && game.betaDate.end !== game.betaDate.start ?
                            ' - ' + formatFullDate(game.betaDate.end) : ''}`) : ''}
            ${game.alphaDate && game.alphaDate.start ?
                    createDetailItem('fa-calendar-minus', 'Alpha Release',
                        `${formatFullDate(game.alphaDate.start)}${game.alphaDate.end && game.alphaDate.end !== game.alphaDate.start ?
                            ' - ' + formatFullDate(game.alphaDate.end) : ''}`) : ''}

            <!-- Platforms & Stores -->
            <div class="game-details-item">
                <i class="fas fa-desktop"></i>
                <span>Platforms:</span>
                <div class="platform-icons-container">
                    ${game.platform.map(platform => `<span class="platform-icon ${platform}" title="${platform}"></span>`).join('')}
                </div>
            </div>
            ${createDetailItem('fa-shopping-cart', 'Stores', game.store || 'Not available')}
            ${createDetailItem('fa-credit-card', 'Subscriptions', game.subscriptions)}

            <!-- Price & Purchase Info -->
            ${createDetailItem('fa-dollar-sign', 'Price', game.price !== undefined && game.price !== null ?
                                (isNaN(parseFloat(game.price)) || parseFloat(game.price) === 0 ? 'Free' :
                                    `$${parseFloat(game.price).toFixed(2)}`) : 'Price not confirmed')}
            ${renderDlcSection(game.dlc)}

            <!-- Media & Content -->
            ${game.trailerLink ? `
                <div class="game-details-item">
                    <i class="fas fa-video"></i>
                    <span>Game Trailer</span>
                    <div class="trailer-container">
                        <iframe 
                            width="100%" 
                            height="315" 
                            src="https://www.youtube.com/embed/${getYouTubeVideoId(game.trailerLink)}"
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>` : ''}
            ${game.extraImages && game.extraImages.length > 0 ? `
                <div class="game-details-item">
                    <i class="fas fa-images"></i>
                    <span>
                        Additional Images
                        <div class="additional-images-container">
                            ${game.extraImages.map(imageUrl =>
                                        `<img src="${imageUrl}" alt="Additional" class="additional-image" 
                                onclick="openImageInPopup('${imageUrl}', this.closest('.additional-images-container'))">`
                                    ).join('')}
                        </div>
                    </span>
                </div>` : ''}

            <!-- Game Details -->
            ${createDetailItem('fa-tags', 'Genres', game.genre)}
            ${createDetailItem('fa-info-circle', 'Description', game.details)}
            ${game.modLinks && game.modLinks.length > 0 ? `
                <div class="game-details-item">
                    <i class="fas fa-link"></i>
                    <span>Mod Links: 
                        ${game.modLinks.map(link => `<a href="${link}" target="_blank">${link}</a>`).join(', ')}
                    </span>
                </div>` : ''}
            ${game.links ? `
                <div class="game-details-item">
                    <i class="fas fa-link"></i>
                    <span>More Info: <a href="${game.links}" target="_blank">External Link</a></span>
                </div>` : ''}
        </div>
    `;

            modal.classList.add('active');
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeGameDetails();
                }
            });
            modalContent.scrollTop = 0;
        }

        function closeGameDetails() {
            const modal = document.getElementById('game-details-modal');
            modal.classList.remove('active');
        }

        function updateGameCounters() {
            // Update favorite counter
            const favoriteGames = JSON.parse(localStorage.getItem('favoriteGames')) || [];
            document.getElementById('favorite-counter').textContent = favoriteGames.length;

            // Update wishlisted counter
            const wishlistedGames = JSON.parse(localStorage.getItem('wishlistedGames')) || [];
            document.getElementById('wishlisted-counter').textContent = wishlistedGames.length;
        }

        // Updated toggleFavorite function with local storage handling
        function toggleFavorite(button, gameId) {
            const game = games.find(g => g.id === gameId);
            if (!game) return;

            // Find the game card where the heart icon was clicked
            const gameCard = button.closest('.game-card');

            // Find the favorite button within that game card
            const favoriteButton = gameCard.querySelector('.btn-favorite');

            // Update the game's isFavorite status
            game.isFavorite = !game.isFavorite;

            // Update the heart icon on the game card
            const heartIcon = gameCard.querySelector('.favorite-icon i');
            if (game.isFavorite) {
                heartIcon.classList.add('active');
            } else {
                heartIcon.classList.remove('active');
            }

            // Update the favorite button in the game card's action section
            if (favoriteButton) {
                favoriteButton.classList.toggle('active', game.isFavorite);
                favoriteButton.innerHTML = `<i class="fas fa-heart"></i> ${game.isFavorite ? 'Favorite' : 'Add Favorite'}`;
            }

            // Update favorite status in local storage
            let favoriteGames = JSON.parse(localStorage.getItem('favoriteGames')) || [];
            if (game.isFavorite) {
                if (!favoriteGames.some(favGame => favGame.id === gameId)) {
                    favoriteGames.push(game);
                }
            } else {
                favoriteGames = favoriteGames.filter(favGame => favGame.id !== gameId);
            }

            localStorage.setItem('favoriteGames', JSON.stringify(favoriteGames));
            populateFavoriteGames();
            filterAndSearchGames();
            updateGameCounters();
        }

        function setupFavoriteGamesList() {
            const favoriteGamesList = document.getElementById('favorite-games-list');
            const showMoreBtn = document.createElement('button');
            showMoreBtn.className = 'show-more-btn';
            showMoreBtn.innerHTML = '<i class="fas fa-chevron-down"></i> Show More';

            // Add the button after the list
            favoriteGamesList.parentNode.insertBefore(showMoreBtn, favoriteGamesList.nextSibling);

            // Initially collapse the list
            favoriteGamesList.classList.add('collapsed');

            showMoreBtn.addEventListener('click', () => {
                favoriteGamesList.classList.toggle('collapsed');
                showMoreBtn.innerHTML = favoriteGamesList.classList.contains('collapsed')
                    ? '<i class="fas fa-chevron-down"></i> Show More'
                    : '<i class="fas fa-chevron-up"></i> Show Less';
            });
        }

        // Function to populate the favorite games list in the sidebar
        function populateFavoriteGames() {
            const favoriteGamesList = document.getElementById('favorite-games-list');
            favoriteGamesList.innerHTML = '';

            const favoriteGamesIds = JSON.parse(localStorage.getItem('favoriteGames')) || [];
            const favoriteGames = games.filter(game => favoriteGamesIds.includes(game.id));

            if (favoriteGames.length === 0) {
                const emptyMessage = document.createElement('li');
                emptyMessage.textContent = "No favorite games yet!";
                favoriteGamesList.appendChild(emptyMessage);
                return;
            }

            favoriteGames.forEach(game => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
            <img src="${game.image}" alt="${game.name}">
            <span>${game.name}</span>
        `;
                listItem.addEventListener('click', () => {
                    // Trigger the details button of the corresponding game card
                    const gameCard = Array.from(document.querySelectorAll(`.game-card`)).find(card => {
                        const titleElement = card.querySelector('.game-card-title');
                        return titleElement && titleElement.textContent === game.name;
                    });
                    if (gameCard) {
                        const detailsButton = gameCard.querySelector('.btn-details');
                        if (detailsButton) {
                            openGameDetails(detailsButton, game.id);
                        }
                    }
                });
                favoriteGamesList.appendChild(listItem);
            });
            setupFavoriteGamesList();
        }

        // Function to populate the wishlisted games list in the sidebar
        function populateWishlistedGames() {
            const wishlistedGamesList = document.getElementById('wishlisted-games-list');
            wishlistedGamesList.innerHTML = ''; // Clear existing list

            const wishlistedGamesIds = JSON.parse(localStorage.getItem('wishlistedGames')) || [];
            const wishlistedGames = games.filter(game => wishlistedGamesIds.includes(game.id));

            if (wishlistedGames.length === 0) {
                const emptyMessage = document.createElement('li');
                emptyMessage.textContent = "No wishlisted games yet!";
                wishlistedGamesList.appendChild(emptyMessage);
                return;
            }

            wishlistedGames.forEach(game => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
    <img src="${game.image}" alt="${game.name}" style="width: 50px; margin-right: 10px; border-radius: 5px;">
    ${game.name}
`;
                listItem.addEventListener('click', () => {
                    // Trigger the details button of the corresponding game card
                    const gameCard = Array.from(document.querySelectorAll(`.game-card`)).find(card => {
                        const titleElement = card.querySelector('.game-card-title');
                        return titleElement && titleElement.textContent === game.name;
                    });
                    if (gameCard) {
                        const detailsButton = gameCard.querySelector('.btn-details');
                        if (detailsButton) {
                            openGameDetails(detailsButton, game.id);
                        }
                    }
                });
                wishlistedGamesList.appendChild(listItem);
            });
        }

        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('active');
        }

        function toggleAddGameSection() {
            const addGameSection = document.querySelector('.add-game-section');
            const overlay = document.querySelector('.overlay');
            addGameSection.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function determineGameStatus(releaseDate) {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const normalizedDate = normalizeReleaseDate(releaseDate);
            if (!normalizedDate || !normalizedDate.start) return '';

            try {
                // Get the current year
                const currentYear = today.getFullYear();

                // First, check if it's a year-only date
                if (/^\d{4}$/.test(normalizedDate.start)) {
                    const releaseYear = parseInt(normalizedDate.start);
                    // Consider it upcoming if it's the current year or future
                    if (releaseYear >= currentYear) {
                        return 'upcoming';
                    }
                    return '';
                }

                // For dates with month or full dates
                let startDate;
                if (/^\d{4}-\d{2}$/.test(normalizedDate.start)) {
                    // For year-month dates, use the last day of the month
                    const [year, month] = normalizedDate.start.split('-');
                    startDate = new Date(parseInt(year), parseInt(month), 0);
                } else {
                    startDate = new Date(normalizedDate.start);
                }
                startDate.setHours(0, 0, 0, 0);

                // Handle normal date comparisons
                if (normalizedDate.end) {
                    const endDate = new Date(normalizedDate.end);
                    endDate.setHours(0, 0, 0, 0);
                    if (startDate > today) return 'upcoming';
                    if (startDate <= today && today <= endDate) return 'new';
                } else {
                    if (startDate > today) return 'upcoming';
                    if (startDate.toDateString() === today.toDateString()) return 'new';
                }
            } catch (error) {
                console.error("Invalid date format:", releaseDate, error);
            }
            return '';
        }

        function filterAndSearchGames() {
            const searchTerm = searchInput.value.toLowerCase();
            const gameCards = document.querySelectorAll('.game-card');

            gameCards.forEach(card => {
                let matchesYear = activeYear === 'all';
                let matchesMonth = activeMonth === null;

                if (card.dataset.releaseDateStart) {
                    try {
                        const dateObj = new Date(card.dataset.releaseDateStart);
                        const year = dateObj.getFullYear().toString();
                        const month = dateObj.getMonth();

                        matchesYear = activeYear === 'all' || year === activeYear;
                        matchesMonth = activeMonth === null || month === parseInt(activeMonth);
                    } catch (error) {
                        console.error("Invalid date format:", card.dataset.releaseDateStart, error);
                    }
                }

                const matchesGenre = activeGenre === 'all' ||
                    card.dataset.genres.split(',').includes(activeGenre) ||
                    (activeGenre === 'upcoming' && card.querySelector('.overlay.upcoming')) ||
                    (activeGenre === 'free' && card.querySelector('.free-tag'));

                const matchesSearchTerm = gameMatchesSearchTerm(card, searchTerm);

                if (matchesGenre && matchesYear && matchesMonth && matchesSearchTerm) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function renderYearFilterList() {
            const yearFilterList = document.getElementById('year-filter-list');
            yearFilterList.innerHTML = '';

            const sortedYears = Object.keys(yearsAndMonths).sort((a, b) => b - a);

            sortedYears.forEach(year => {
                const yearItem = document.createElement('li');
                yearItem.classList.add('year-filter-item');
                yearItem.textContent = year;
                yearItem.dataset.year = year;

                yearItem.addEventListener('click', function (event) {
                    // Prevent event bubbling to avoid triggering the document click event
                    event.stopPropagation();

                    // Remove active class from previously active year
                    document.querySelectorAll('.year-filter-item.active').forEach(y => y.classList.remove('active'));

                    // Toggle active class for clicked year
                    this.classList.add('active');
                    activeYear = this.dataset.year;
                    filterAndSearchGames();

                    // Remove the active month when the year changes
                    activeMonth = null;

                    // Close the month filter list for other years
                    document.querySelectorAll('.month-filter-list').forEach(list => {
                        if (list.dataset.year !== year) {
                            list.style.display = 'none';
                        }
                    });

                    // Toggle visibility of month list for the clicked year
                    const monthList = this.querySelector('.month-filter-list');
                    if (monthList) {
                        monthList.style.display = monthList.style.display === 'flex' ? 'none' : 'flex';
                    }

                    // Prevent the click event from immediately closing the dropdown
                    event.stopPropagation();
                });

                const monthFilterList = document.createElement('ul');
                monthFilterList.classList.add('month-filter-list');
                monthFilterList.dataset.year = year; // Add a data attribute for the year

                const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
                yearsAndMonths[year].forEach(monthIndex => {
                    const monthItem = document.createElement('li');
                    monthItem.classList.add('month-filter-item');
                    monthItem.textContent = months[monthIndex];
                    monthItem.dataset.month = monthIndex;

                    monthItem.addEventListener('click', function (event) {
                        // Prevent event bubbling to the year filter item
                        event.stopPropagation();

                        // Remove active class from previously active month
                        document.querySelectorAll('.month-filter-item.active').forEach(m => m.classList.remove('active'));

                        // Toggle active class for clicked month
                        this.classList.add('active');
                        activeMonth = this.dataset.month; // Update activeMonth with dataset.month
                        filterAndSearchGames();

                        // Prevent event bubbling to avoid triggering the document click event
                        event.stopPropagation();
                    });

                    monthFilterList.appendChild(monthItem);
                });

                yearItem.appendChild(monthFilterList);
                yearFilterList.appendChild(yearItem);
            });
            // Add a click event to the document to close month filter lists when clicking outside
            document.addEventListener('click', () => {
                document.querySelectorAll('.month-filter-list').forEach(list => list.style.display = 'none');
                document.querySelectorAll('.year-filter-item').forEach(y => y.classList.remove('active'));
            });
        }

        // Call this function after populating yearsAndMonths
        renderYearFilterList();

        // Add event listener for the genre filter list
        document.getElementById('genre-filter-list').addEventListener('click', function (event) {
            // Set active genre
            activeGenre = event.target.dataset.genre;

            // Handle the 'Favorites' filter separately
            if (activeGenre === 'favorites') {
                // No need to update games here, `filterAndSearchGames` will handle it based on the active state of the filter
                document.querySelectorAll('#genre-filter-list li').forEach(li => li.classList.remove('active'));
                event.target.classList.add('active');
            } else {
                // Remove active class from all genre filters including 'Favorites'
                document.querySelectorAll('#genre-filter-list li').forEach(li => li.classList.remove('active'));
                // Add active class to clicked filter
                event.target.classList.add('active');
                // Reset activeYear and activeMonth when selecting any category in genre
                activeYear = 'all';
                activeMonth = null;
            }

            // if free game is selected then call  populateFreeGamesList
            if (activeGenre === 'free') {
                populateFreeGamesList();
            }

            filterAndSearchGames();
            document.querySelectorAll('.additional-image').forEach(image => {
                image.addEventListener('click', () => {
                    const container = image.closest('.additional-images-container');
                    const imageSrc = image.src;
                    openImageInPopup(imageSrc, image);
                });
            });
        });

        function gameMatchesSearchTerm(card, searchTerm) {
            const title = card.querySelector('.game-card-title').textContent.toLowerCase();
            const tags = Array.from(card.querySelectorAll('.game-tag')).map(tag => tag.textContent.toLowerCase()).join(' ');
            const specialQuote = card.querySelector('.special-quote')?.textContent.toLowerCase() || '';
            let price = '';
            const priceElement = card.querySelector('.game-card-header span');
            if (priceElement) {
                const priceValue = priceElement.textContent;
                const numericPrice = isNaN(parseFloat(priceValue)) ? 0 : parseFloat(priceValue);
                price = numericPrice === 0 ? 'free' : numericPrice.toFixed(2);
                price = price.toLowerCase();
            }

            return title.includes(searchTerm) || tags.includes(searchTerm) || price.includes(searchTerm) || specialQuote.includes(searchTerm);
        }

        function searchGames() {
            filterAndSearchGames();
        }

        // Reset all filters
        function resetFilters() {
            // Reset active genre and year
            activeGenre = 'all';
            activeYear = 'all';
            activeMonth = null;

            // Reset genre filter list
            document.querySelectorAll('#genre-filter-list li').forEach(li => li.classList.remove('active'));
            document.querySelector('#genre-filter-list li[data-genre="all"]').classList.add('active');

            // Reset year filter list
            document.querySelectorAll('#year-filter-list li').forEach(li => li.classList.remove('active'));
            document.querySelector('#year-filter-list li[data-year="all"]').classList.add('active');

            // Clear the search input
            document.getElementById('game-search').value = '';

            // Re-render all games to clear filters
            renderAllGames();
        }

        // Populate Free Games List
        function populateFreeGamesList() {
            const freeGamesList = document.getElementById('free-games-list');
            freeGamesList.innerHTML = '';

            const freeGames = games.filter(game => game.price == 0).sort((a, b) => new Date(b.releaseDate.start) - new Date(a.releaseDate.start));
            const latestFreeGames = freeGames.slice(0, 3);

            latestFreeGames.forEach(game => {
                const listItem = document.createElement('li');

                // Add an image to the list item
                const gameImage = document.createElement('img');
                gameImage.src = game.image;
                gameImage.alt = game.name;
                gameImage.style.width = '50px';
                gameImage.style.marginRight = '10px';
                gameImage.style.borderRadius = '5px';
                listItem.appendChild(gameImage);
                listItem.appendChild(document.createTextNode(game.name));
                listItem.addEventListener('click', () => {
                    activeGenre = 'free';

                    // Reset activeYear and activeMonth when selecting any category in genre
                    activeYear = 'all';
                    activeMonth = null;

                    filterAndSearchGames();
                    document.querySelectorAll('#genre-filter-list li').forEach(li => li.classList.remove('active'));
                    document.querySelector('#genre-filter-list li[data-genre="free"]').classList.add('active');
                });

                freeGamesList.appendChild(listItem);
            });
        }

        // Function to format any date format - this should be placed outside oninput function
        function formatAnyDate(inputField) {
            let value = inputField.value.trim();

            // Regular expressions for different date formats
            const fullDateRegex = /^\d{4}-\d{2}-\d{2}$/; // YYYY-MM-DD
            const monthYearRegex = /^\d{4}-\d{2}$/; // YYYY-MM
            const yearRegex = /^\d{4}$/; // YYYY
            const dateTimeRegex = /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/; // YYYY-MM-DDTHH:MM

            // Check if the input matches any of the date/time formats and format accordingly
            if (dateTimeRegex.test(value)) {
                // Format for YYYY-MM-DDTHH:MM
                const date = new Date(value);
                inputField.value = date.toISOString().slice(0, 16); // ISO format up to minutes
            } else if (fullDateRegex.test(value)) {
                // Format for YYYY-MM-DD
                const date = new Date(value);
                inputField.value = date.toISOString().slice(0, 10); // ISO format YYYY-MM-DD
            } else if (monthYearRegex.test(value)) {
                // Format for YYYY-MM
                const year = value.split('-')[0];
                const month = value.split('-')[1];
                inputField.value = `${year}-${month}`;
            } else if (yearRegex.test(value)) {
                // Format for YYYY
                const year = value;
                inputField.value = `${year}`;
            } else {
                // For invalid formats, you can clear the input or leave it as is
                // inputField.value = ''; // Uncomment to clear invalid input
            }
        }

        // Function to add event listeners to date input fields
        function addDateInputListeners() {
            const releaseDateInputStart = document.getElementById('game-release-date-start');
            const releaseDateInputEnd = document.getElementById('game-release-date-end');
            const betaDateInputStart = document.getElementById('game-beta-date-start');
            const betaDateInputEnd = document.getElementById('game-beta-date-end');
            const alphaDateInputStart = document.getElementById('game-alpha-date-start');
            const alphaDateInputEnd = document.getElementById('game-alpha-date-end');
            const earlyAccessDateInputStart = document.getElementById('game-early-access-date-start');
            const earlyAccessDateInputEnd = document.getElementById('game-early-access-date-end');

            const releaseDateCalendar = document.getElementById('game-release-date-calendar');
            const betaDateCalendar = document.getElementById('game-beta-date-calendar');
            const alphaDateCalendar = document.getElementById('game-alpha-date-calendar');
            const earlyAccessDateCalendar = document.getElementById('game-early-access-date-calendar');

            // Helper function to set up each date input
            function setupDateInput(inputStart, inputEnd, calendar) {
                inputStart.addEventListener('click', () => {
                    calendar.style.display = 'block';
                    calendar.focus();
                });

                inputEnd.addEventListener('click', () => {
                    calendar.style.display = 'block';
                    calendar.focus();
                });

                calendar.addEventListener('change', () => {
                    if (!inputStart.value) {
                        inputStart.value = formatAnyDate(calendar);
                    } else {
                        inputEnd.value = formatAnyDate(calendar);
                    }
                    calendar.style.display = 'none';
                });

                calendar.addEventListener('click', (event) => {
                    event.stopPropagation();
                });
            }

            // Set up each pair of date inputs
            setupDateInput(releaseDateInputStart, releaseDateInputEnd, releaseDateCalendar);
            setupDateInput(betaDateInputStart, betaDateInputEnd, betaDateCalendar);
            setupDateInput(alphaDateInputStart, alphaDateInputEnd, alphaDateCalendar);
            setupDateInput(earlyAccessDateInputStart, earlyAccessDateInputEnd, earlyAccessDateCalendar);
        }

        // Add multiple select functionality to dropdowns
        document.querySelectorAll('select[multiple]').forEach(select => {
            select.addEventListener('click', function (e) {
                e.stopPropagation(); // Changed from e.preventDefault() to e.stopPropagation()
                this.focus();
            });
        });

        // Function to manage favorite games in local storage
        function toggleFavorite(button, gameId) {
            const game = games.find(g => g.id === gameId);
            if (!game) return;

            let favoriteGames = JSON.parse(localStorage.getItem('favoriteGames')) || [];
            const isFavorite = favoriteGames.includes(gameId);

            // Toggle the isFavorite status of the game
            game.isFavorite = !game.isFavorite;

            if (!isFavorite) {
                favoriteGames.push(gameId);
                button.classList.add('active'); // Update the icon on the game card

            } else {
                favoriteGames = favoriteGames.filter(id => id !== gameId);
                button.classList.remove('active'); // Update the icon on the game card

            }

            localStorage.setItem('favoriteGames', JSON.stringify(favoriteGames));
            populateFavoriteGames();
            filterAndSearchGames();
        }

        // Function to populate the favorite games list in the sidebar
        function populateFavoriteGames() {
            const favoriteGamesList = document.getElementById('favorite-games-list');
            favoriteGamesList.innerHTML = '';

            const favoriteGamesIds = JSON.parse(localStorage.getItem('favoriteGames')) || [];
            const favoriteGames = games.filter(game => favoriteGamesIds.includes(game.id));

            if (favoriteGames.length === 0) {
                const emptyMessage = document.createElement('li');
                emptyMessage.textContent = "No favorite games yet!";
                favoriteGamesList.appendChild(emptyMessage);
                return;
            }

            favoriteGames.forEach(game => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
            <img src="${game.image}" alt="${game.name}" style="width: 50px; margin-right: 10px; border-radius: 5px;">
            ${game.name}
        `;
                listItem.addEventListener('click', () => {
                    // Trigger the details button of the corresponding game card
                    const gameCard = Array.from(document.querySelectorAll(`.game-card`)).find(card => {
                        const titleElement = card.querySelector('.game-card-title');
                        return titleElement && titleElement.textContent === game.name;
                    });
                    if (gameCard) {
                        const detailsButton = gameCard.querySelector('.btn-details');
                        if (detailsButton) {
                            openGameDetails(detailsButton, game.id);
                        }
                    }
                });
                favoriteGamesList.appendChild(listItem);
            });
        }

        // Function to manage wishlisted games in local storage
        function toggleWishlist(button, gameId) {
            const game = games.find(g => g.id === gameId);
            if (!game) return;

            let wishlistedGames = JSON.parse(localStorage.getItem('wishlistedGames')) || [];
            const isWishlisted = wishlistedGames.includes(gameId);

            if (!isWishlisted) {
                wishlistedGames.push(gameId);
                game.isWishlisted = true;
                button.classList.add('active');
                button.innerHTML = `<i class="fas fa-heart"></i> Wishlisted`;
            } else {
                wishlistedGames = wishlistedGames.filter(id => id !== gameId);
                game.isWishlisted = false;
                button.classList.remove('active');
                button.innerHTML = `<i class="fas fa-heart"></i> Wishlist`;
            }

            localStorage.setItem('wishlistedGames', JSON.stringify(wishlistedGames));
            populateWishlistedGames(); // Update the UI
            updateGameCounters();
        }

        // Function to toggle the visibility of a sidebar section
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.style.display = section.style.display === 'none' ? 'block' : 'none';
            }
        }

        // Function to toggle the categories section
        function toggleCategories() {
            const categoriesSection = document.getElementById('categories-section');
            categoriesSection.classList.toggle('active');
        }
    </script>
</body>

</html>
